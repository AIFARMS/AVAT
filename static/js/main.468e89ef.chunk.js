(this.webpackJsonpannotation_tool=this.webpackJsonpannotation_tool||[]).push([[0],{159:function(e,t){},160:function(e,t){},161:function(e,t){},167:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(9),c=a.n(r),l=(a(93),a(94),a(33)),o=a.n(l),s=(a(39),a(70)),u=a.n(s),d=a(81),m=a(17),b=a(11),f=a(60),v=a(59),E=a(32),h=a(38),g=(a(82),a(83),a(84)),O=a.n(g),j=(a(153),[{dataField:"id",text:"ID"},{dataField:"behavior",text:"Behavior"},{dataField:"is_hidden",text:"Hidden"}]);var p=function(e){var t=function(e){var t=[];if(null==e)return[];console.log(e.objects);for(var a=0;a<e.objects.length;a++){var n=[],i=a+1;n.push({id:parseInt(i),behavior:"None",is_hidden:"False"}),t.push(n)}return console.log(t),t}(e.data);return i.a.createElement("div",{style:{width:"15%"}},i.a.createElement(O.a,{condensed:!0,keyField:"id",data:t,columns:j}))},y=a(174),w=a(154).fabric,S=a(162),A=a(163),D=new S.Reactor({debug:!0}),k=function(e){var t,a={};if(!(e instanceof Object)||Array.isArray(e))throw new Error("keyMirror(...): Argument must be an object.");for(t in e)e.hasOwnProperty(t)&&(a[t]=t);return a}({fabricData:null,activeObject:null}),C=new w.Canvas,R=S.Store({getInitialState:function(){return S.toImmutable({fabricData:{objects:[]},activeObject:!1})},initialize:function(){this.on(k.fabricData,this.saveFabricData),this.on(k.activeObject,this.saveActiveObject)},saveFabricData:function(e,t){return e.set("fabricData",S.toImmutable(t))},saveActiveObject:function(e,t){return e.set("activeObject",t)}});D.registerStores({fabricStore:R});var F=A({displayName:"Fabric",componentDidMount:function(){var e=c.a.findDOMNode(this);C.initialize(e,{height:.8*window.innerHeight,width:.8*window.innerWidth,backgroundColor:null}),C.on("mouse:up",(function(){D.dispatch(k.fabricData,C.toObject()),D.dispatch(k.activeObject,!!C.getActiveObject())})),C.on("saveData",(function(){D.dispatch(k.fabricData,C.toObject()),D.dispatch(k.activeObject,!!C.getActiveObject()),C.renderAll()}))},render:function(){return i.a.createElement("canvas",null)}}),x=A({displayName:"NewObjects",mixins:[D.ReactMixin],getDataBindings:function(){return{fabricData:["fabricStore","fabricData"],activeObject:["fabricStore","activeObject"]}},render:function(){return this.state.fabricData.get("objects").size,i.a.createElement("div",{style:{float:"right"}},i.a.createElement(b.a,{onClick:this.addSquare,style:{position:"relative"}},"Add Square")," ",i.a.createElement(b.a,{onClick:this.remove,style:{position:"relative"}},"Remove")," ")},addSquare:function(){var e="#"+((1<<24)*Math.random()|0).toString(16),t=new w.Rect({hasRotatingPoint:!1,uniScaleTransform:!0,height:50,width:50,originX:"center",originY:"center",fill:e,borderColor:"#000",opacity:".4",top:C.height/2,left:C.width/2},(function(e){console.log(e)}));C.add(t),C.setActiveObject(t),C.fire("saveData")},remove:function(){C.remove(C.getActiveObject()),C.fire("saveData")}});A({displayName:"ActiveObject",mixins:[D.ReactMixin],getDataBindings:function(){return{fabricObject:["fabricStore","fabricData","objects",0],activeObject:["fabricStore","activeObject"]}},render:function(){if(console.log(this.state.activeObject),this.state.fabricObject){var e=this.state.fabricObject.get("fill");return console.log(C.getActiveObject()),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("b",null,"Active Object")),i.a.createElement("div",null,"fill: ",i.a.createElement("span",{style:{color:e}},this.state.fabricObject.get("fill"))),i.a.createElement("div",null,"top: ",this.state.fabricObject.get("top")),i.a.createElement("div",null,"left: ",this.state.fabricObject.get("left")),i.a.createElement("div",null,"angle: ",this.state.fabricObject.get("angle")),i.a.createElement("div",null,"scaleX: ",this.state.fabricObject.get("scaleX")),i.a.createElement("div",null,"scaleY: ",this.state.fabricObject.get("scaleY")))}return console.log(C.getActiveObject()),null}});var I=[],N=!1;var T=function(){var e=Object(n.useState)(null),t=Object(m.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),l=Object(m.a)(c,2),s=(l[0],l[1],Object(n.useState)(null)),g=Object(m.a)(s,2),O=(g[0],g[1]),j=Object(n.useState)(!1),w=Object(m.a)(j,2),S=w[0],A=w[1],D="ERROR";D=!0===S?"Pause":"Play";var k=Object(n.useState)(!1),R=Object(m.a)(k,2),T=(R[0],R[1]),M=Object(n.useState)(0),P=Object(m.a)(M,2),B=P[0],U=P[1],L=Object(n.useState)(null),J=Object(m.a)(L,2),W=J[0],z=J[1],H=Object(n.useState)(0),_=Object(m.a)(H,2),Y=_[0],q=_[1],G=Object(n.useState)(0),V=Object(m.a)(G,2),X=V[0],K=V[1],$=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n,i,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="generated_annotations",a=JSON.stringify(I),n=new Blob([a],{type:"application/json"}),e.next=5,URL.createObjectURL(n);case 5:i=e.sent,(r=document.createElement("a")).href=i,r.download=t+".json",document.body.appendChild(r),r.click(),document.body.removeChild(r);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=Object(n.useState)(!1),Z=Object(m.a)(Q,2),ee=Z[0],te=Z[1],ae=function(){return te(!1)};return i.a.createElement("div",null,i.a.createElement(f.a,{bg:"dark",variant:"dark",class:"bg-5"},i.a.createElement(f.a.Brand,{href:"#home"},"Annotation Tool"),i.a.createElement(v.a,{className:"mr-auto"},i.a.createElement(v.a.Link,{onClick:function(){return te(!0)}},"Instructions"),i.a.createElement(y.a,{title:"Dropdown",id:"basic-nav-dropdown"},i.a.createElement(y.a.Divider,null),i.a.createElement(y.a.Item,{disabled:!0},"Input Frame-Rate: ",i.a.createElement("input",{type:"text"})))),i.a.createElement("div",null,i.a.createElement(b.a,{variant:"secondary",disabled:"true"},"Frame # ",parseInt(X)+" / "+parseInt(15*Y)),i.a.createElement(h.a,{style:{float:"left",width:80}},i.a.createElement(h.a.File,{id:"file",label:"Annotation Upload",custom:!0,type:"file",onChange:function(e){return new Promise((function(t,a){var n=new FileReader;n.onload=function(e){t(O(JSON.parse(e.target.result)))},n.readAsText(e.target.files[0])}))}})),i.a.createElement(h.a,{style:{float:"left",width:80}},i.a.createElement(h.a.File,{id:"file",label:"Video Upload",custom:!0,type:"file",onChange:function(e){r(URL.createObjectURL(e.target.files[0])),N=!0}})),i.a.createElement(b.a,{variant:"primary",onClick:function(e){var t=15*Y;W.seekTo((W.getCurrentTime()/Y*t-1)/t)}},"Prev Frame")," ",i.a.createElement(b.a,{variant:"primary",onClick:function(e){A(!S)}},D)," ",i.a.createElement(b.a,{variant:"primary",onClick:function(e){var t=15*Y;I[X]=C.toJSON(),console.log(X),console.log(I),W.seekTo((W.getCurrentTime()/Y*t+1)/t)}},"Next Frame")," ",i.a.createElement(b.a,{variant:"primary",onClick:$},"GENERATE JSON")," ",i.a.createElement(x,null))),i.a.createElement(E.a,{show:ee,onHide:ae},i.a.createElement(E.a.Header,{closeButton:!0},i.a.createElement(E.a.Title,null,"Instructions")),i.a.createElement(E.a.Body,null,"TODO: Add instructions"),i.a.createElement(E.a.Footer,null,i.a.createElement(b.a,{variant:"secondary",onClick:ae},"Close"))),i.a.createElement("div",{style:{display:"flex"}},i.a.createElement("div",{style:{position:"relative"}},i.a.createElement(o.a,{onProgress:function(e){console.log(e);var t=15*Y;t,U(X/t),K(Math.round(e.played*t))},ref:function(e){z(e),!0===N&&null!=W&&(console.log("RESET VALUES"),I=new Array(7200),N=!1)},onDuration:function(e){q(parseInt(e)),console.log(e)},url:a,width:.8*window.innerWidth,height:.8*window.innerHeight,playing:S,controls:!1,style:{position:"realtive",float:"left"},volume:0,muted:!0,pip:!1}),i.a.createElement(F,null),i.a.createElement("input",{style:{width:.8*window.innerWidth},type:"range",min:0,max:.999999,step:"any",value:B,onMouseDown:function(e){T(!0)},onChange:function(e){U(parseFloat(e.target.value))},onMouseUp:function(e){T(!1),W.seekTo(parseFloat(e.target.value))}})),i.a.createElement(p,{data:I[X],style:{float:"right"}})))},M=a(85);var P=function(){return i.a.createElement("div",null,alert("WORK IN PROGRESS! Please reload page"),"RELOAD PAGE")},B=a(172),U=a(173);var L=function(){var e=Object(n.useState)(!1),t=(Object(M.a)(e),Object(n.useState)(!1)),a=Object(m.a)(t,2),r=a[0],c=a[1],l=Object(n.useState)(!1),o=Object(m.a)(l,2),s=o[0],u=o[1];return r?i.a.createElement(P,null):s?i.a.createElement(T,null):i.a.createElement(B.a,{fluid:!0},i.a.createElement(U.a,null,i.a.createElement("div",{class:"row align-items-center"},i.a.createElement("div",{class:"pb-4 col-md-6 col-lg-7"},i.a.createElement("h0",{style:{fontSize:"50px"}},"Annotation Tool ","  ",i.a.createElement("img",{class:"",src:"/pig-annotation-tool/favicon.ico",alt:"logo",style:{width:"9%"}})),i.a.createElement("h5",null," Online tool to mass annotate videos for AI/ML "),i.a.createElement(b.a,{size:"lg"},"Instructions")),i.a.createElement("div",{class:"col-md-6 col-lg-5"},i.a.createElement("div",{class:"row"},i.a.createElement("div",{class:"col"},i.a.createElement("div",{class:"card my-2"},i.a.createElement(b.a,{onClick:function(e){u(!s)},variant:"outline-success"},"Video Upload"))),i.a.createElement("div",{class:"col-12"},i.a.createElement("div",{class:"card my-2"},i.a.createElement(b.a,{onClick:function(e){c(!r)},variant:"outline-success"},"YouTube"))))))),i.a.createElement("div",{class:"container"},i.a.createElement("div",{class:"row align-items-center"})))};var J=function(){return i.a.createElement("div",null,i.a.createElement(L,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},88:function(e,t,a){e.exports=a(167)},93:function(e,t,a){},94:function(e,t,a){}},[[88,1,2]]]);
//# sourceMappingURL=main.468e89ef.chunk.js.map
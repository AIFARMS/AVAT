(this.webpackJsonpannotation_tool=this.webpackJsonpannotation_tool||[]).push([[0],{46:function(e,t,a){e.exports=a(87)},51:function(e,t,a){},53:function(e,t,a){},81:function(e,t){},82:function(e,t){},83:function(e,t){},87:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(15),r=a.n(c),o=(a(51),a(39)),l=a.n(o),s=a(44),u=a(12),b=(a(53),a(45)),f=a.n(b),m=a(10),d=a(25),v=a(22),h=a(11),g=a(27);a(74);var O=a(76).fabric,j=a(84),p=a(85),E=new j.Reactor({debug:!0}),y=function(e){var t,a={};if(!(e instanceof Object)||Array.isArray(e))throw new Error("keyMirror(...): Argument must be an object.");for(t in e)e.hasOwnProperty(t)&&(a[t]=t);return a}({fabricData:null,activeObject:null}),w=new O.Canvas,S=j.Store({getInitialState:function(){return j.toImmutable({fabricData:{objects:[]},activeObject:!1})},initialize:function(){this.on(y.fabricData,this.saveFabricData),this.on(y.activeObject,this.saveActiveObject)},saveFabricData:function(e,t){return e.set("fabricData",j.toImmutable(t))},saveActiveObject:function(e,t){return e.set("activeObject",t)}});E.registerStores({fabricStore:S});var k=p({displayName:"Fabric",componentDidMount:function(){var e=r.a.findDOMNode(this);w.initialize(e,{height:.95*window.innerHeight,width:.95*window.innerWidth,backgroundColor:null}),w.on("mouse:up",(function(){E.dispatch(y.fabricData,w.toObject()),E.dispatch(y.activeObject,!!w.getActiveObject())})),w.on("saveData",(function(){E.dispatch(y.fabricData,w.toObject()),E.dispatch(y.activeObject,!!w.getActiveObject()),w.renderAll()}))},render:function(){return i.a.createElement("canvas",null)}}),D=p({displayName:"NewObjects",mixins:[E.ReactMixin],getDataBindings:function(){return{fabricData:["fabricStore","fabricData"],activeObject:["fabricStore","activeObject"]}},render:function(){return this.state.fabricData.get("objects").size,i.a.createElement("div",{style:{float:"right"}},i.a.createElement(m.a,{onClick:this.addSquare,style:{position:"relative"}},"Add Square")," ",i.a.createElement(m.a,{onClick:this.remove,style:{position:"relative"}},"Remove")," ")},addSquare:function(){var e="#"+((1<<24)*Math.random()|0).toString(16),t=new O.Rect({hasRotatingPoint:!1,uniScaleTransform:!0,height:50,width:50,originX:"center",originY:"center",fill:e,borderColor:"#000",opacity:".4",top:w.height/2,left:w.width/2},(function(e){console.log(e)}));w.add(t),w.setActiveObject(t),w.fire("saveData")},remove:function(){w.remove(w.getActiveObject()),w.fire("saveData")}}),A=(p({displayName:"ActiveObject",mixins:[E.ReactMixin],getDataBindings:function(){return{fabricObject:["fabricStore","fabricData","objects",0],activeObject:["fabricStore","activeObject"]}},render:function(){if(console.log(this.state.activeObject),this.state.fabricObject){var e=this.state.fabricObject.get("fill");return console.log(w.getActiveObject()),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("b",null,"Active Object")),i.a.createElement("div",null,"fill: ",i.a.createElement("span",{style:{color:e}},this.state.fabricObject.get("fill"))),i.a.createElement("div",null,"top: ",this.state.fabricObject.get("top")),i.a.createElement("div",null,"left: ",this.state.fabricObject.get("left")),i.a.createElement("div",null,"angle: ",this.state.fabricObject.get("angle")),i.a.createElement("div",null,"scaleX: ",this.state.fabricObject.get("scaleX")),i.a.createElement("div",null,"scaleY: ",this.state.fabricObject.get("scaleY")))}return console.log(w.getActiveObject()),null}}),[]),C=!1;var R=function(){var e=Object(n.useState)(null),t=Object(u.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(null),o=Object(u.a)(r,2),b=(o[0],o[1],Object(n.useState)(!1)),O=Object(u.a)(b,2),j=O[0],p=O[1],E=Object(n.useState)(!1),y=Object(u.a)(E,2),S=(y[0],y[1]),R=Object(n.useState)(0),F=Object(u.a)(R,2),N=F[0],T=F[1],M=Object(n.useState)(null),x=Object(u.a)(M,2),I=x[0],B=x[1],U=Object(n.useState)(0),L=Object(u.a)(U,2),J=L[0],P=L[1],q=Object(n.useState)(0),z=Object(u.a)(q,2),H=z[0],W=z[1],X=function(){var e=Object(s.a)(l.a.mark((function e(){var t,a,n,i,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="generated_annotations",a=JSON.stringify(A),n=new Blob([a],{type:"application/json"}),e.next=5,URL.createObjectURL(n);case 5:i=e.sent,(c=document.createElement("a")).href=i,c.download=t+".json",document.body.appendChild(c),c.click(),document.body.removeChild(c);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=Object(n.useState)(!1),_=Object(u.a)(Y,2),V=_[0],G=_[1],$=function(){return G(!1)};return i.a.createElement("div",null,i.a.createElement(d.a,{bg:"dark",variant:"dark"},i.a.createElement(d.a.Brand,{href:"#home"},"Annotation Tool"),i.a.createElement(v.a,{className:"mr-auto"},i.a.createElement(v.a.Link,{onClick:function(){return G(!0)}},"Instructions")),i.a.createElement("div",null,i.a.createElement(m.a,{variant:"secondary",disabled:"true"},"Frame # ",parseInt(H)+" / "+parseInt(15*J)),i.a.createElement(g.a,{style:{float:"left"}},i.a.createElement(g.a.File,{id:"file",label:"Annotation Upload",custom:!0,type:"file"})),i.a.createElement(g.a,{style:{float:"left"}},i.a.createElement(g.a.File,{id:"file",label:"Video Upload",custom:!0,type:"file",onChange:function(e){c(URL.createObjectURL(e.target.files[0])),C=!0}})),i.a.createElement(m.a,{variant:"primary",onClick:function(e){var t=15*J;I.seekTo((I.getCurrentTime()/J*t-1)/t)}},"Prev Frame")," ",i.a.createElement(m.a,{variant:"primary",onClick:function(e){p(!j)}},"Pause")," ",i.a.createElement(m.a,{variant:"primary",onClick:function(e){var t=15*J;A[H]=w.toJSON(),console.log(H),console.log(A),I.seekTo((I.getCurrentTime()/J*t+1)/t)}},"Next Frame")," ",i.a.createElement(m.a,{variant:"primary",onClick:X},"GENERATE JSON")," ",i.a.createElement(D,null))),i.a.createElement(h.a,{show:V,onHide:$},i.a.createElement(h.a.Header,{closeButton:!0},i.a.createElement(h.a.Title,null,"Instructions")),i.a.createElement(h.a.Body,null,"TODO: Add instructions"),i.a.createElement(h.a.Footer,null,i.a.createElement(m.a,{variant:"secondary",onClick:$},"Close"))),i.a.createElement("div",{style:{float:"right",position:"relative"}}),i.a.createElement(f.a,{onProgress:function(e){console.log(e);var t=15*J;t,W(Math.round(e.played*t))},ref:function(e){B(e),!0===C&&null!=I&&(console.log("RESET VALUES"),A=new Array(7200),C=!1)},onDuration:function(e){P(parseInt(e)),console.log(e)},url:a,width:"90%",height:"90%",playing:j,controls:!1,style:{position:"realtive",float:"left"},volume:0,muted:!0,pip:!1}),i.a.createElement(k,null),i.a.createElement("input",{width:"100%",type:"range",min:0,max:.999999,step:"any",value:N,onMouseDown:function(e){S(!0)},onChange:function(e){T(parseFloat(e.target.value))},onMouseUp:function(e){S(!1),I.seekTo(parseFloat(e.target.value))}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.5972b17c.chunk.js.map
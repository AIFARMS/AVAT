{"version":3,"sources":["backend_processing/annotation-processing.js","ui_elements/Components/change_table.js","backend_processing/bounding_box.js","backend_processing/frame_bounding_box.js","backend_processing/key_point.js","backend_processing/segmentation.js","ui_elements/Pages/main_upload.js","ui_elements/Pages/main_youtube.js","serviceWorker.js","index.js"],"names":["AnnotationProcessing","annotation_json","this","objects","console","log","id","frame_num","i","objects_frame","length","curr_obj","curr_obj_frames","j","push","Type","SELECT","ChangeTable","fabric","require","BoundingBox","top","left","width","height","color","behavior","Rect","hasRotatingPoint","uniScaleTransform","fill","borderColor","opacity","Text","toString","fontSize","Group","rectangle","id_text","FrameBoundingBox","frame_data","canvas_width","canvas_height","windowWidth","windowHeight","bounding_boxes","Math","random","curr_box","getTop","getLeft","getWidth","getHeight","generate_no_behavior","data","floor","KeyPoint","canvas","makeCircle","line1","line2","line3","line4","c","Circle","strokeWidth","radius","stroke","hasControls","hasBorders","makeLine","coords","Line","selectable","evented","Object","prototype","originX","originY","line","line5","line6","add","get","on","e","p","target","set","renderAll","$","Segmentation","activeLine","polygonMode","pointArray","Array","lineArray","activeShape","prototypefabric","selection","options","polygon","generatePolygon","addPoint","class","pointer","getPointer","x2","x","y2","y","points","drawPolygon","Date","getTime","circle","layerX","getZoom","layerY","objectCaching","pos","Polygon","remove","polyPoint","each","index","point","group","addWithUpdate","centerX","createReactClass","fabricCanvas","Canvas","Fabric","componentDidMount","el","ReactDOM","findDOMNode","initialize","backgroundColor","global_currFrame","toJSON","render","upload","MainUpload","useState","annotationType","setAnnotationType","boxCount","setBoxCount","videoFilePath","setVideoFileURL","oldAnnotation","setOldAnnotation","useEffect","getAllObjectByFrame","downloadOldAnnotation","file","Promise","resolve","reject","reader","FileReader","onload","JSON","parse","result","readAsText","files","playing","setPlaying","play_button_text","setSeeking","sliderPercent","setSliderPercent","player","setPlayer","duration","setDuration","currentFrame","setCurrentFrame","downloadFile","a","fileName","json","stringify","blob","Blob","type","URL","createObjectURL","href","link","document","createElement","download","body","appendChild","click","removeChild","show","setShow","handleClose","Navbar","bg","variant","className","Brand","Nav","Link","onClick","NavDropdown","title","Item","Divider","disabled","Button","parseInt","Form","style","float","File","label","custom","onChange","event","then","total_frames","seekTo","getCurrentTime","new_bbox","setActiveObject","generate_stick","generate_polygon","fire","position","getActiveObject","Modal","onHide","Header","closeButton","Title","Body","Footer","display","gridColumn","gridRow","onProgress","val","round","clear","bbox","generate_frame","ref","onDuration","url","controls","volume","muted","pip","min","max","step","value","onMouseDown","parseFloat","onMouseUp","Nuclear","reactor","Reactor","debug","keys","obj","key","ret","isArray","Error","hasOwnProperty","keyMirror","fabricData","activeObject","fabricStore","Store","getInitialState","toImmutable","saveFabricData","saveActiveObject","state","registerStores","alert","window","innerHeight","innerWidth","dispatch","toObject","mixins","ReactMixin","getDataBindings","size","addSquare","bounding_box","drop","fabricObject","Boolean","location","hostname","match","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.00f38ffd.chunk.js","sourcesContent":["export default class AnnotationProcessing {\n    constructor(annotation_json){\n        this.objects = annotation_json['objects']\n        console.log(this.objects)\n    }\n\n    getObjects() {\n        return this.objects\n    }\n\n    getObjectById(id) {\n        return this.objects[id]\n    }\n\n    getObjectByIdFrame(id, frame_num){\n        return this.objects[id][frame_num]\n    }\n\n    getAllObjectByFrame(frame_num){\n        var i;\n        var objects_frame = []\n        for (i = 0; i < this.objects.length; i++){\n            var curr_obj = this.objects[i]\n            if(curr_obj['frames'][curr_obj['frames'].length-1]['frameNumber'] < frame_num){\n                continue;\n            }\n            var curr_obj_frames = curr_obj['frames'];\n            for (var j = 0; j < curr_obj_frames.length; j++){\n                if(curr_obj_frames[j]['frameNumber'] === frame_num){\n                    objects_frame.push(curr_obj_frames[j]);\n                    break;\n                }\n            }\n        }\n        console.log(objects_frame)\n        return objects_frame;\n    }\n\n}\n\n","import React, { useState } from \"react\"; \nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nimport BootstrapTable from 'react-bootstrap-table-next';\nimport cellEditFactory, { Type } from 'react-bootstrap-table2-editor';\nimport 'react-bootstrap-table-next/dist/react-bootstrap-table2.min.css';\n\nimport {behaviors} from '../../static_data/behaviors'\nimport {posture} from '../../static_data/posture'\n\nconst columns = [{\n    dataField: \"id\",\n    text: \"ID\"\n},{\n    dataField: \"behavior\",\n    text: \"Beh\",\n    editor: {\n        type: Type.SELECT,\n        options: behaviors\n      }\n},{\n    dataField: \"is_hidden\",\n    text: \"Hid\"\n},{\n    dataField: \"posture\",\n    text: \"Pos\",\n    editor: {\n        type: Type.SELECT,\n        options: {posture}\n      }\n}]\n\nfunction json_to_table(data){\n    var ret = []\n    if(data == null){\n        return []\n    }\n    for(var i = 0; i < data['objects'].length; i++){\n        const elem_id = i + 1\n        var curr_obj = data['objects'][i]\n        console.log(curr_obj['left'])\n        ret.push({id: elem_id.toString(), behavior: \"None\", is_hidden: \"False\", posture: \"None\"})        \n    }\n    return ret\n}\n\nfunction ChangeTable(input){\n    //console.log(input.data)\n    const data = json_to_table(input.data)\n    return (\n        <div style={{width: \"15%\"}}>\n            <BootstrapTable condensed={true} keyField='id' data={data} columns={ columns } cellEdit={ cellEditFactory({ mode: 'click', blurToSave: true }) }/>\n        </div>\n    )\n}\n\nexport default ChangeTable;","const fabric = require(\"fabric\").fabric;\n\nclass BoundingBox {\n    constructor(top, left, width, height, color, id, behavior) {\n        this.top = top;\n        this.left = left;\n        this.id = id;\n        this.behavior = behavior;\n        this.color = color;\n        this.width = width;\n        this.height = height;\n    }\n\n    rectangle(){\n        return new fabric.Rect({\n            hasRotatingPoint: false,\n            uniScaleTransform: true,\n            height: this.height,\n            width: this.width,\n            fill: this.color,\n            borderColor: '#000',\n            opacity: '.4',\n            top: this.top,\n            left: this.left,\n        });\n    } \n\n    //TODO Add text scaling\n    id_text(){\n        return new fabric.Text(this.id.toString(), {\n            fontSize: 20,\n            top: this.top,\n            left: this.left,\n            uniScaleTransform: false,\n          });\n    }\n\n    behavior(){\n\n    }\n\n    generate_no_behavior(){\n        return new fabric.Group([this.rectangle() , this.id_text() ], {\n            left: this.left,\n            top: this.top,\n            uniScaleTransform: true\n          });\n    }\n\n    generate_with_behavior(){\n\n    }\n}\n\n\nfunction genetate_bounding_box(){\n\n}\n\nexport {BoundingBox, genetate_bounding_box}","import { BoundingBox } from \"./bounding_box\"\n\nclass FrameBoundingBox {\n    constructor(frame_data, canvas_width, canvas_height){\n        this.frame_data = frame_data;\n        this.canvas_width = canvas_width;\n        this.canvas_height = canvas_height;\n        this.windowWidth = 3840;\n        this.windowHeight = 2178;\n    }\n\n    generate_frame(){\n        var bounding_boxes = []\n        for (var i = 0; i < this.frame_data.length; i++){\n            var color = \"#\" + ((1<<24)*Math.random() | 0).toString(16)\n            console.log(this.frame_data[i])\n            var curr_box = new BoundingBox(this.getTop(this.frame_data[i]), this.getLeft(this.frame_data[i]), this.getWidth(this.frame_data[i]), this.getHeight(this.frame_data[i]), color, i, \"TEST\").generate_no_behavior()\n            bounding_boxes.push(curr_box);\n        }\n        return bounding_boxes\n    }\n\n    getID(data){\n        return data['id']\n    }\n\n    getWidth(data){\n        return Math.floor((data['bbox']['width']/this.windowWidth)*this.canvas_width)\n    }\n\n    getHeight(data){\n        return Math.floor((data['bbox']['height']/this.windowHeight)*this.canvas_height)\n    }\n\n    getTop(data){\n        return Math.floor((data['bbox']['y']/this.windowHeight)*this.canvas_height)\n    }\n\n    getLeft(data){\n        return Math.floor((data['bbox']['x']/this.windowWidth)*this.canvas_width)\n    }\n\n\n}\n\nexport {FrameBoundingBox}","const fabric = require(\"fabric\").fabric;\n\nclass KeyPoint {\n    //TODO Optimize this code. Right now there is a significant performance penalty if there are multiple keypoints on the canvas\n    generate_stick(canvas){\n        fabric.Object.prototype.originX = fabric.Object.prototype.originY = 'center';\n\n        function makeCircle(left, top, line1, line2, line3, line4) {\n            var c = new fabric.Circle({\n            left: left,\n            top: top,\n            strokeWidth: 5,\n            radius: 12,\n            fill: '#fff',\n            stroke: '#666'\n            });\n            c.hasControls = c.hasBorders = false;\n\n            c.line1 = line1;\n            c.line2 = line2;\n            c.line3 = line3;\n            c.line4 = line4;\n\n            return c;\n        }\n\n        function makeLine(coords) {\n            return new fabric.Line(coords, {\n            fill: 'red',\n            stroke: 'red',\n            strokeWidth: 5,\n            selectable: false,\n            evented: false,\n            });\n        }\n\n        var line = makeLine([ 250, 125, 250, 175 ]),\n            line2 = makeLine([ 250, 175, 250, 250 ]),\n            line3 = makeLine([ 250, 250, 300, 350]),\n            line4 = makeLine([ 250, 250, 200, 350]),\n            line5 = makeLine([ 250, 175, 175, 225 ]),\n            line6 = makeLine([ 250, 175, 325, 225 ]);\n\n        canvas.add(line, line2, line3, line4, line5, line6);\n\n        canvas.add(\n            makeCircle(line.get('x1'), line.get('y1'), null, line),\n            makeCircle(line.get('x2'), line.get('y2'), line, line2, line5, line6),\n            makeCircle(line2.get('x2'), line2.get('y2'), line2, line3, line4),\n            makeCircle(line3.get('x2'), line3.get('y2'), line3),\n            makeCircle(line4.get('x2'), line4.get('y2'), line4),\n            makeCircle(line5.get('x2'), line5.get('y2'), line5),\n            makeCircle(line6.get('x2'), line6.get('y2'), line6)\n        );\n\n        canvas.on('object:moving', function(e) {\n            var p = e.target;\n            p.line1 && p.line1.set({ 'x2': p.left, 'y2': p.top });\n            p.line2 && p.line2.set({ 'x1': p.left, 'y1': p.top });\n            p.line3 && p.line3.set({ 'x1': p.left, 'y1': p.top });\n            p.line4 && p.line4.set({ 'x1': p.left, 'y1': p.top });\n            canvas.renderAll();\n        });\n    }   \n\n\n    generate_poly(canvas){\n        \n    }\n}\n\nexport {KeyPoint}","const fabric = require(\"fabric\").fabric;\nconst $ = require(\"jquery\")\n\nclass Segmentation {\n    generate_polygon(canvas, id){\n        var min = 99;\n        var max = 999999;\n        var polygonMode = true;\n        var pointArray = new Array();\n        var lineArray = new Array();\n\n        var activeLine;\n        var activeShape = false;\n\n        var prototypefabric = new function () {\n                //canvas = window._canvas = new fabric.Canvas('c');\n                //canvas.setWidth($(window).width());\n                //canvas.setHeight($(window).height()-$('#nav-bar').height());\n                canvas.selection = false;\n        \n                canvas.on('mouse:down', function (options) {\n                    if(options.target && options.target.id === pointArray[0].id){\n                        prototypefabric.polygon.generatePolygon(pointArray);\n                    }\n                    if(polygonMode){\n                        prototypefabric.polygon.addPoint(options);\n                    }\n                });\n                canvas.on('mouse:up', function (options) {\n        \n                });\n                canvas.on('mouse:move', function (options) {\n                    if(activeLine && activeLine.class == \"line\"){\n                        var pointer = canvas.getPointer(options.e);\n                        activeLine.set({ x2: pointer.x, y2: pointer.y });\n        \n                        var points = activeShape.get(\"points\");\n                        points[pointArray.length] = {\n                            x:pointer.x,\n                            y:pointer.y\n                        }\n                        activeShape.set({\n                            points: points\n                        });\n                        canvas.renderAll();\n                    }\n                    canvas.renderAll();\n                });\n        }();\n        \n        \n        \n        prototypefabric.polygon = {\n            drawPolygon : function() {\n                polygonMode = true;\n                pointArray = new Array();\n                lineArray = new Array();\n            },\n            addPoint : function(options) {\n                var random = Math.floor(Math.random() * (max - min + 1)) + min;\n                var id = new Date().getTime() + random;\n                var circle = new fabric.Circle({\n                    radius: 5,\n                    fill: '#ffffff',\n                    stroke: '#333333',\n                    strokeWidth: 0.5,\n                    left: (options.e.layerX/canvas.getZoom()),\n                    top: (options.e.layerY/canvas.getZoom()),\n                    selectable: false,\n                    hasBorders: false,\n                    hasControls: false,\n                    originX:'center',\n                    originY:'center',\n                    id:id,\n                        objectCaching:false\n                });\n                if(pointArray.length == 0){\n                    circle.set({\n                        fill:'red'\n                    })\n                }\n                var points = [(options.e.layerX/canvas.getZoom()),(options.e.layerY/canvas.getZoom()),(options.e.layerX/canvas.getZoom()),(options.e.layerY/canvas.getZoom())];\n                var line = new fabric.Line(points, {\n                    strokeWidth: 2,\n                    fill: '#999999',\n                    stroke: '#999999',\n                    class:'line',\n                    originX:'center',\n                    originY:'center',\n                    selectable: false,\n                    hasBorders: false,\n                    hasControls: false,\n                    evented: false,\n                        objectCaching:false\n                });\n                if(activeShape){\n                    var pos = canvas.getPointer(options.e);\n                    var points = activeShape.get(\"points\");\n                    points.push({\n                        x: pos.x,\n                        y: pos.y\n                    });\n                    var polygon = new fabric.Polygon(points,{\n                        stroke:'#333333',\n                        strokeWidth:1,\n                        fill: '#cccccc',\n                        opacity: 0.3,\n                        selectable: false,\n                        hasBorders: false,\n                        hasControls: false,\n                        evented: false,\n                        objectCaching:false\n                    });\n                    canvas.remove(activeShape);\n                    canvas.add(polygon);\n                    activeShape = polygon;\n                    canvas.renderAll();\n                }\n                else{\n                    var polyPoint = [{x:(options.e.layerX/canvas.getZoom()),y:(options.e.layerY/canvas.getZoom())}];\n                    var polygon = new fabric.Polygon(polyPoint,{\n                        stroke:'#333333',\n                        strokeWidth:1,\n                        fill: '#cccccc',\n                        opacity: 0.3,\n                        selectable: false,\n                        hasBorders: false,\n                        hasControls: false,\n                        evented: false,\n                        objectCaching:false\n                    });\n                    activeShape = polygon;\n                    canvas.add(polygon);\n                }\n                activeLine = line;\n        \n                pointArray.push(circle);\n                lineArray.push(line);\n        \n                canvas.add(line);\n                canvas.add(circle);\n                canvas.selection = false;\n            },\n            generatePolygon : function(pointArray){\n                var points = new Array();\n                $.each(pointArray,function(index,point){\n                    points.push({\n                        x:point.left,\n                        y:point.top\n                    });\n                    canvas.remove(point);\n                });\n                $.each(lineArray,function(index,line){\n                    canvas.remove(line);\n                });\n\n                console.log(pointArray)\n                console.log(lineArray)\n\n\n                var group = new fabric.Group()\n                for (var i = 0; i < pointArray.length; i++){\n                    group.addWithUpdate(pointArray[i])\n                    group.addWithUpdate(lineArray[i])\n                }\n                group.addWithUpdate(new fabric.Text(id.toString(), {\n                    fontSize: 20,\n                    centerX: \"center\",\n                    top: pointArray[0].top,\n                    left: pointArray[0].left, \n                    uniScaleTransform: false,\n                  }));\n\n                canvas.add(group)\n\n                canvas.remove(activeLine);\n                canvas.remove(activeShape)\n                //canvas.add(polygon);\n        \n                activeLine = null;\n                activeShape = null;\n                polygonMode = false;\n                canvas.selection = true;\n            }\n        };\n        \n        \n        prototypefabric.polygon.drawPolygon();\n    }\n}\n\nexport {Segmentation}","import React, { useEffect, useState } from \"react\"; \nimport ReactDOM from 'react-dom'\nimport ReactPlayer from 'react-player'\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nimport Button from 'react-bootstrap/Button'\nimport Navbar from 'react-bootstrap/Navbar'\nimport Nav from 'react-bootstrap/Nav'\nimport Modal from 'react-bootstrap/Modal'\nimport Form from 'react-bootstrap/Form'\n\n\nimport AnnotationProcessing from '../../backend_processing/annotation-processing'\nimport ChangeTable from '../Components/change_table'\nimport { NavDropdown } from \"react-bootstrap\";\n\n//Custom implemented classes\nimport { BoundingBox } from '../../backend_processing/bounding_box'\nimport { FrameBoundingBox } from '../../backend_processing/frame_bounding_box'\nimport { KeyPoint } from '../../backend_processing/key_point'\nimport { FrameData } from '../../backend_processing/frame_data'\nimport { Segmentation } from '../../backend_processing/segmentation'\n\nconst fabric = require(\"fabric\").fabric;\nconst Nuclear = require(\"nuclear-js\");\nconst createReactClass = require('create-react-class');\n\n\n//TODO ADD DYNAMIC SOLUTION \nvar frame_rate = 15;\nconst scaling_factor_height = 1080;\nconst scaling_factor_width = 1920;\n\n// globally accessable fabricCanvas instance\nvar fabricCanvas = new fabric.Canvas('c', {uniScaleTransform: true});\n\n\nvar Fabric = createReactClass({\n\tcomponentDidMount() {\n  \tvar el = ReactDOM.findDOMNode(this);\n    \n    // Here we have the canvas so we can initialize fabric\n    fabricCanvas.initialize(el, {\n    \theight: 1080,\n      width: 1920,\n      backgroundColor : null,\n    });\n    \n    // on mouse up lets save some state\n    fabricCanvas.on('mouse:up', () => {\n      frame_data[global_currFrame] = fabricCanvas.toJSON()\n    });\n\n    \n    // an event we will fire when we want to save state\n    fabricCanvas.on('saveData', () => {\n      fabricCanvas.renderAll(); // programatic changes we make will not trigger a render in fabric\n    });\n  }, \n  render() {\n    return <canvas></canvas>\n  }\n});\n\nvar frame_data = [];\nvar upload = false;\nvar global_currFrame = 0;\n\n//Current frame counter\nfunction MainUpload() {\n  \n  const [annotationType, setAnnotationType] = useState(0)\n  const handleAnnotationType = (event) => {\n    console.log(event.target.value)\n  }\n  \n  const [boxCount, setBoxCount] = useState(0)\n  const addToCanvas = () =>{\n    var color = \"#\" + ((1<<24)*Math.random() | 0).toString(16)\n    \n    if (annotationType === 0){\n      var new_bbox = new BoundingBox(fabricCanvas.height/2, fabricCanvas.width/2, 50, 50, color, boxCount, \"None\").generate_no_behavior()\n      fabricCanvas.add(new_bbox)\n      fabricCanvas.setActiveObject(new_bbox);\n    }else if (annotationType === 1){\n      var test = new KeyPoint().generate_stick(fabricCanvas)\n    }else if (annotationType === 2){\n      var test1 = new Segmentation().generate_polygon(fabricCanvas, boxCount)\n    }\n\n    setBoxCount(boxCount + 1);\n    fabricCanvas.fire('saveData');\n  }\n\n  const remove = () => {\n    setBoxCount(boxCount + 1)\n    fabricCanvas.remove(fabricCanvas.getActiveObject());\n    fabricCanvas.fire('saveData');\n  }\n\n  const [videoFilePath, setVideoFileURL] = useState(null);\n  const handleVideoUpload = (event) => {\n    //console.log(oldAnnotation)\n    setVideoFileURL(URL.createObjectURL(event.target.files[0]));\n    upload = true;\n  };\n\n  //Code for dual video upload option. Currently disabled\n  const [videoFilePath1, setVideoFileURL1] = useState(null);\n  const handleVideoUpload1 = (event) => {\n    setVideoFileURL1(URL.createObjectURL(event.target.files[0]));\n  };\n  \n  //ASYNC Function  - To note that the data that comes out of this will be a bit delayed and this could cause some issues.\n  const [oldAnnotation, setOldAnnotation] = useState(null)\n  const handleOldAnnotation = (event) => {\n      var promise = downloadOldAnnotation(event)\n      promise.then(function (result) {\n        if(result != null){\n          setOldAnnotation(new AnnotationProcessing(result));\n        }else{\n          console.log(\"ERROR in upload old_annotation\")\n        }\n      })\n  }\n\n  useEffect(() => {\n    //TODO Find a more elegant solution. This is a temporay patch work.\n    if(oldAnnotation == null){\n      return;\n    }\n    console.log(oldAnnotation)\n    console.log(oldAnnotation.getAllObjectByFrame(2));\n  }, oldAnnotation);\n\n  const downloadOldAnnotation = (file) => {\n    return new Promise((resolve, reject) => {\n      var reader = new FileReader();\n      reader.onload = function(e) {\n         resolve((JSON.parse(e.target.result)));\n      }\n      reader.readAsText(file.target.files[0])\n    })\n  }\n  \n\n  const [playing, setPlaying] = useState(false);\n  const handlePlaying = (event) => {\n    setPlaying(!playing)\n  }\n\n  var play_button_text = \"ERROR\"\n  if(playing === true){\n    play_button_text = \"Pause\"\n  }else{\n    play_button_text = \"Play\"\n  }\n\n  const [seeking, setSeeking] = useState(false)\n  const [sliderPercent, setSliderPercent] = useState(0)\n\n  const handleSeekChange = e => {\n    setSliderPercent(parseFloat(e.target.value))\n  }\n\n  const handleSeekMouseDown = e => {\n    setSeeking(true)\n  }\n\n  const handleSeekMouseUp = e => {\n    setSeeking(false)\n    player.seekTo(parseFloat(e.target.value))\n  }\n\n  const [player, setPlayer] = useState(null)\n  const handleSetPlayer = val => {\n    setPlayer(val)\n    if(upload === true && player != null){      \n      console.log(\"RESET VALUES\")\n      frame_data = new Array(7200)\n      //TODO Update this later\n      for (var i = 0; i < 7200; i++){\n        frame_data[i] = []\n      }\n      upload = false;\n    }\n  }\n\n  const [duration, setDuration] = useState(0);\n  const handleSetDuration = val => {\n    setDuration(parseInt(val))\n    console.log(val)\n  }\n\n  var tot = 0\n\n  const [currentFrame, setCurrentFrame] = useState(0)\n  const handleSetCurrentFrame = val => {\n    console.log(val)\n    var total_frames = duration * frame_rate\n    tot = total_frames\n    setSliderPercent(currentFrame/total_frames)\n    setCurrentFrame(Math.round(val['played']*total_frames))\n    global_currFrame = currentFrame\n\n    if(oldAnnotation != null){ \n      fabricCanvas.clear();\n      var bbox = new FrameBoundingBox(oldAnnotation.getAllObjectByFrame(currentFrame), scaling_factor_width, scaling_factor_height).generate_frame()\n      for(var i = 0; i < bbox.length; i++){\n        var curr_obj = bbox[i]\n        console.log(curr_obj)\n        fabricCanvas.add(curr_obj);\n        fabricCanvas.setActiveObject(curr_obj);\n        fabricCanvas.fire('saveData');\n      }\n    }\n\n  }\n\n  const [numBoundingBox, setNumBoundingBox] = useState(0)\n  const handleNumBoundingBox = val => {\n    setNumBoundingBox(numBoundingBox + 1);\n    \n  }\n\n\n  const skip_frame_forward = e =>{\n    var total_frames = duration * frame_rate\n    //frame_data[currentFrame] = fabricCanvas.toJSON()\n    console.log(currentFrame)\n    console.log(frame_data)\n    player.seekTo((((player.getCurrentTime()/duration)*total_frames)+1)/(total_frames))\n  }\n\n  const skip_frame_backward = e => {\n    var total_frames = duration * frame_rate\n    player.seekTo((((player.getCurrentTime()/duration)*total_frames)-1)/(total_frames))\n  }\n\n  //frame_data[currentFrame] = fabricCanvas.toJSON()\n\n  const downloadFile = async () => {\n    const fileName = \"generated_annotations\";\n    //const json = JSON.stringify(fabricCanvas.getObjects());\n    const json = JSON.stringify(frame_data);\n    const blob = new Blob([json],{type:'application/json'});\n    const href = await URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = href;\n    link.download = fileName + \".json\";\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  }\n\n  const [show, setShow] = useState(false);\n\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n\n  const handleSquareBox = () => {\n    setAnnotationType(0);\n  }\n\n  const handleKeyPoint = () => {\n    setAnnotationType(1);\n  }\n\n  const handleSegmentation = () => {\n    setAnnotationType(2);\n  }\n\n  return (\n    <div>\n      <Navbar bg=\"dark\" variant=\"dark\" className=\"bg-5\">\n          <Navbar.Brand href=\"#home\">Annotation Tool</Navbar.Brand>\n          <Nav className=\"mr-auto\">\n              <Nav.Link onClick={handleShow}>Instructions</Nav.Link>\n\n              <NavDropdown title=\"Annotation Type\" id=\"basic-nav-dropdown\">\n                <NavDropdown.Item onClick={handleSquareBox} >Square Box</NavDropdown.Item>\n                <NavDropdown.Divider />\n                <NavDropdown.Item onClick={handleKeyPoint}>Key Point</NavDropdown.Item>\n                <NavDropdown.Divider />\n                <NavDropdown.Item onClick={handleSegmentation}>Segmentation</NavDropdown.Item>\n              </NavDropdown>\n\n              <NavDropdown title=\"Export\" id=\"basic-nav-dropdown\">\n                <NavDropdown.Item onClick={downloadFile}>JSON</NavDropdown.Item>\n                <NavDropdown.Divider />\n                <NavDropdown.Item >CSV</NavDropdown.Item>\n              </NavDropdown>\n\n              <NavDropdown title=\"Settings\" id=\"basic-nav-dropdown\">\n                <NavDropdown.Divider />\n                <NavDropdown.Item disabled={true}>Input Frame-Rate: <input type=\"text\"></input></NavDropdown.Item>\n              </NavDropdown>\n          </Nav>\n          <div>\n            <Button variant=\"secondary\" disabled=\"true\">Frame # {parseInt(currentFrame)+' / '+parseInt(duration * frame_rate)}</Button>\n            <Form style={{float: \"left\", width: 80}}>\n              <Form.File id=\"file\" label=\"Annotation Upload\" custom type=\"file\" onChange={handleOldAnnotation}/>\n            </Form>\n            <Form style={{float: \"left\", width: 80}}>\n              <Form.File id=\"file\" label=\"Video Upload\" custom type=\"file\" onChange={handleVideoUpload} />\n            </Form>\n            <Button variant=\"primary\" onClick={skip_frame_backward}>Prev</Button>{' '}\n            <Button variant=\"primary\" onClick={handlePlaying}>{play_button_text}</Button>{' '}\n            <Button variant=\"primary\" onClick={skip_frame_forward}>Next</Button>{' '}\n            \n            <div style={{float: \"right\"}}>\n              <Button onClick={addToCanvas} style={{position:\"relative\"}}>Add</Button>{' '}\n              <Button onClick={remove} style={{position:\"relative\"}}>Remove</Button>{' '}\n            </div>\n\n          </div>\n      </Navbar>\n      <Modal show={show} onHide={handleClose}>\n          <Modal.Header closeButton>\n          <Modal.Title>Instructions</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>TODO: Add instructions</Modal.Body>\n          <Modal.Footer>\n          <Button variant=\"secondary\" onClick={handleClose}>Close</Button>\n          </Modal.Footer>\n      </Modal>\n      <div style={{display: \"grid\"}}>\n        <div style={{gridColumn: 1, gridRow:1, position: \"relative\", width: scaling_factor_width, height: scaling_factor_height, top: 0, left: 0}}>\n          <ReactPlayer \n            onProgress={handleSetCurrentFrame} \n            ref={handleSetPlayer} \n            onDuration={handleSetDuration} \n            url={videoFilePath} \n            width='100%'\n            height='99.999%'\n            playing={playing} \n            controls={false} \n            style={{position:'absolute', float:'left', top:0, left:0}}\n            volume={0}\n            muted={true}\n            pip={false}\n          />\n        </div>\n        <div style={{gridColumn: 1, gridRow:1, position: \"relative\", width: scaling_factor_width, height: scaling_factor_height, top: 0, left: 0}}>\n          <Fabric/>\n        </div>\n        <div style={{gridColumn: 1, gridRow:2, position: \"relative\", width: scaling_factor_width, top: 0, left: 0}}>\n\n          <input\n            style={{width: scaling_factor_width}}\n            type='range' min={0} max={0.999999} step='any'\n            value={sliderPercent}\n            onMouseDown={handleSeekMouseDown}\n            onChange={handleSeekChange}\n            onMouseUp={handleSeekMouseUp}\n          />\n        </div>\n        <div style={{gridColumn: 2, gridRow:1, position: \"relative\", width: scaling_factor_width, height: scaling_factor_height, top: 0, left: 0}}>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n//<ChangeTable data={frame_data[currentFrame]} style={{ float: \"right\"}}/>\n\nexport default MainUpload;","import React, { useState } from \"react\"; \nimport ReactDOM from 'react-dom'\nimport ReactPlayer from 'react-player'\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nimport Button from 'react-bootstrap/Button'\nimport Navbar from 'react-bootstrap/Navbar'\nimport Nav from 'react-bootstrap/Nav'\nimport Modal from 'react-bootstrap/Modal'\nimport Form from 'react-bootstrap/Form'\nimport Table from 'react-bootstrap/Table'\n\n//import Custon_Nav_Bar from '../backend_processing/nav_bar'\n\nimport Annotation from '../../backend_processing/annotation-processing'\nimport ChangeTable from '../Components/change_table'\nimport { NavDropdown } from \"react-bootstrap\";\n\nconst fabric = require(\"fabric\").fabric;\nconst Nuclear = require(\"nuclear-js\");\nconst createReactClass = require('create-react-class');\n\n\n//TODO ADD DYNAMIC SOLUTION \nvar frame_rate = 15;\nvar scaling_factor = .8\n\nvar keyMirror = function(obj) {\n  var ret = {};\n  var key;\n  if (!(obj instanceof Object && !Array.isArray(obj))) {\n    throw new Error('keyMirror(...): Argument must be an object.');\n  }\n  for (key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      ret[key] = key;\n    }\n  }\n  return ret;\n};\n\nvar reactor = new Nuclear.Reactor({ debug: true });\nvar keys = keyMirror({ fabricData: null, activeObject: null });\n\n// globally accessable fabricCanvas instance\nvar fabricCanvas = new fabric.Canvas();\n\n// A place to put fabric data\nvar fabricStore = Nuclear.Store({\n  getInitialState() {\n    return Nuclear.toImmutable({\n    \tfabricData: {\n      \tobjects: [],\n      },\n      activeObject: false,\n    })\n  },\n  initialize() {\n    this.on(keys.fabricData, this.saveFabricData)\n    this.on(keys.activeObject, this.saveActiveObject)\n  },\n  saveFabricData(state, fabricData) {\n\t\treturn state.set('fabricData', Nuclear.toImmutable(fabricData));\n\t},\n  saveActiveObject(state, value) {\n\t\treturn state.set('activeObject',value);\n\t}\n});\n\nreactor.registerStores({\n  'fabricStore': fabricStore,\n});\n\nvar Fabric = createReactClass({\n\tcomponentDidMount() {\n  \tvar el = ReactDOM.findDOMNode(this);\n    {alert(\"Please use the upload functionality. This is a Alpha version and some features may be missing or broken. The video upload option should have the latest features and bug fixes. This sign will be updated when the youtube option is functional. \")}\n    // Here we have the canvas so we can initialize fabric\n    fabricCanvas.initialize(el, {\n    \theight: window.innerHeight* scaling_factor,\n      width: window.innerWidth * scaling_factor,\n      backgroundColor : null,\n    });\n    \n    // on mouse up lets save some state\n    fabricCanvas.on('mouse:up', () => {\n      reactor.dispatch(keys.fabricData, fabricCanvas.toObject());\n      reactor.dispatch(keys.activeObject, !!fabricCanvas.getActiveObject());\n    });\n    \n    // an event we will fire when we want to save state\n    fabricCanvas.on('saveData', () => {\n    \treactor.dispatch(keys.fabricData, fabricCanvas.toObject());\n      reactor.dispatch(keys.activeObject, !!fabricCanvas.getActiveObject());\n      fabricCanvas.renderAll(); // programatic changes we make will not trigger a render in fabric\n    });\n  }, \n  render() {\n    \n    return <canvas></canvas>\n  }\n});\n\n\n\nvar NewObjects = createReactClass({\n\tmixins: [reactor.ReactMixin],\n  getDataBindings() {\n  \treturn {\n    \tfabricData: ['fabricStore', 'fabricData'],\n    \tactiveObject: ['fabricStore', 'activeObject'],\n    };\n  },\n  render: function() {\n  \tif (this.state.fabricData.get('objects').size === 0) {\n    \t// no object is on the canvas so show interface to add one\n      //<input type=\"file\" id=\"video_submit\" value=\"none\"/> //onClick={this.addKanalImg}/>\n      return (\n      <div style={{float: \"right\"}}>\n        <Button onClick={this.addSquare} style={{position:\"relative\"}}>Add Square</Button>{' '}\n        <Button onClick={this.remove} style={{position:\"relative\"}}>Remove</Button>{' '}\n      </div>\n      );\n    } else {\n    \t// an object is selected so lets interact with it\n    \treturn (\n        <div style={{float: \"right\"}}>\n          <Button onClick={this.addSquare} style={{position:\"relative\"}}>Add Square</Button>{' '}\n          <Button onClick={this.remove} style={{position:\"relative\"}}>Remove</Button>{' '}\n        </div>\n      );\n    }//else {\n    \t// if there is an object but it is not selected then remove the buttons\n    \t//return null;\n    //}\n  },\n  addSquare() {\n    var color = \"#\" + ((1<<24)*Math.random() | 0).toString(16)\n    var bounding_box = new fabric.Rect({\n      hasRotatingPoint: false,\n      uniScaleTransform: true,\n    \theight: 50,\n    \twidth: 50,\n      originX: 'center',\n      originY: 'center',\n      fill: color,\n      borderColor: '#000',\n      opacity: '.4',\n      top: fabricCanvas.height / 2,\n      left: fabricCanvas.width / 2,\n    }, function(drop){\n        console.log(drop)\n    })\n  \tfabricCanvas.add(bounding_box);\n    fabricCanvas.setActiveObject(bounding_box);\n    fabricCanvas.fire('saveData');\n  },\n  remove() {\n    fabricCanvas.remove(fabricCanvas.getActiveObject());\n    fabricCanvas.fire('saveData');\n  }\n});\n\nvar ActiveObject = createReactClass({\n\tmixins: [reactor.ReactMixin],\n  getDataBindings() {\n  \treturn {\n    \tfabricObject: ['fabricStore', 'fabricData', 'objects', 0],\n      activeObject: ['fabricStore', 'activeObject']\n    };\n  },\n  render: function() {\n    //return null;\n    console.log(this.state.activeObject)\n  \tif (this.state.fabricObject) {\n    \t// if an object exists in state we can acess the data from any where in the app\n    \tvar fill = this.state.fabricObject.get('fill');\n      console.log((fabricCanvas.getActiveObject()))\n      return (<div>\n        <div><b>Active Object</b></div>\n        <div>fill: <span style={{ color: fill}}>{this.state.fabricObject.get('fill')}</span></div>\n        <div>top: {this.state.fabricObject.get('top')}</div>\n        <div>left: {this.state.fabricObject.get('left')}</div>\n        <div>angle: {this.state.fabricObject.get('angle')}</div>\n        <div>scaleX: {this.state.fabricObject.get('scaleX')}</div>\n        <div>scaleY: {this.state.fabricObject.get('scaleY')}</div>\n      </div>);\n    } else {\n      console.log(fabricCanvas.getActiveObject())\n    \treturn null;\n    }\n  },\n});\n\nfunction draw_annotation(x, y, width, height){\n\n}\n\nfunction parse_file(file){\n  \n}\n\nvar frame_data = [];\nvar upload = false;\n\n//Current frame counter\nfunction MainYoutube() {\n  const [videoFilePath, setVideoFileURL] = useState(null);\n  const handleVideoUpload = (event) => {\n    //console.log(oldAnnotation)\n    setVideoFileURL(URL.createObjectURL(event.target.files[0]));\n    upload = true;\n  };\n\n  //Code for dual video upload option. Currently disabled\n  const [videoFilePath1, setVideoFileURL1] = useState(null);\n  const handleVideoUpload1 = (event) => {\n    setVideoFileURL1(URL.createObjectURL(event.target.files[0]));\n  };\n  \n  //ASYNC Function  - To note that the data that comes out of this will be a bit delayed and this could cause some issues.\n  const [oldAnnotation, setOldAnnotation] = useState(null)\n  const handleOldAnnotation = (event) => {\n    return new Promise((resolve, reject) => {\n      var reader = new FileReader();\n      reader.onload = function(e) {\n         resolve(setOldAnnotation(JSON.parse(e.target.result)));\n      }\n      reader.readAsText(event.target.files[0])\n    })\n  }\n    \n  \n\n  const [playing, setPlaying] = useState(false);\n  const handlePlaying = (event) => {\n    setPlaying(!playing)\n  }\n\n  var play_button_text = \"ERROR\"\n  if(playing === true){\n    play_button_text = \"Pause\"\n  }else{\n    play_button_text = \"Play\"\n  }\n\n  const [seeking, setSeeking] = useState(false)\n  const [sliderPercent, setSliderPercent] = useState(0)\n\n  const handleSeekChange = e => {\n    setSliderPercent(parseFloat(e.target.value))\n  }\n\n  const handleSeekMouseDown = e => {\n    setSeeking(true)\n  }\n\n  const handleSeekMouseUp = e => {\n    setSeeking(false)\n    player.seekTo(parseFloat(e.target.value))\n  }\n\n  const [player, setPlayer] = useState(null)\n  const handleSetPlayer = val => {\n    setPlayer(val)\n    if(upload === true && player != null){      \n      console.log(\"RESET VALUES\")\n      frame_data = new Array(7200)\n      upload = false;\n    }\n  }\n\n  const [duration, setDuration] = useState(0);\n  const handleSetDuration = val => {\n    setDuration(parseInt(val))\n    console.log(val)\n  }\n\n  var tot = 0\n\n  const [currentFrame, setCurrentFrame] = useState(0)\n  const handleSetCurrentFrame = val => {\n    console.log(val)\n    var total_frames = duration * frame_rate\n    tot = total_frames\n    setSliderPercent(currentFrame/total_frames)\n    setCurrentFrame(Math.round(val['played']*total_frames))\n  }\n\n\n  const skip_frame_forward = e =>{\n    var total_frames = duration * frame_rate\n    frame_data[currentFrame] = fabricCanvas.toJSON()\n    console.log(currentFrame)\n    console.log(frame_data)\n    player.seekTo((((player.getCurrentTime()/duration)*total_frames)+1)/(total_frames))\n  }\n\n  const skip_frame_backward = e => {\n    var total_frames = duration * frame_rate\n    player.seekTo((((player.getCurrentTime()/duration)*total_frames)-1)/(total_frames))\n  }\n\n  \n\n  const downloadFile = async () => {\n    const fileName = \"generated_annotations\";\n    //const json = JSON.stringify(fabricCanvas.getObjects());\n    const json = JSON.stringify(frame_data);\n    const blob = new Blob([json],{type:'application/json'});\n    const href = await URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = href;\n    link.download = fileName + \".json\";\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  }\n\n  const [show, setShow] = useState(false);\n\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n\n  return (\n    <div>\n      \n      <Navbar bg=\"dark\" variant=\"dark\" class=\"bg-5\">\n          <Navbar.Brand href=\"#home\">Annotation Tool</Navbar.Brand>\n          <Nav className=\"mr-auto\">\n              <Nav.Link onClick={handleShow}>Instructions</Nav.Link>\n\n              <NavDropdown title=\"Annotation Type\" id=\"basic-nav-dropdown\">\n                <NavDropdown.Item >Square Box</NavDropdown.Item>\n                <NavDropdown.Divider />\n                <NavDropdown.Item >Key Point</NavDropdown.Item>\n                <NavDropdown.Divider />\n                <NavDropdown.Item >Wire Frame</NavDropdown.Item>\n              </NavDropdown>\n\n              <NavDropdown title=\"Export\" id=\"basic-nav-dropdown\">\n                <NavDropdown.Item onClick={downloadFile}>JSON</NavDropdown.Item>\n                <NavDropdown.Divider />\n                <NavDropdown.Item >CSV</NavDropdown.Item>\n              </NavDropdown>\n\n              <NavDropdown title=\"Settings\" id=\"basic-nav-dropdown\">\n                <NavDropdown.Divider />\n                <NavDropdown.Item disabled={true}>Input Frame-Rate: <input type=\"text\"></input></NavDropdown.Item>\n              </NavDropdown>\n          </Nav>\n          <div>\n            <Button variant=\"secondary\" disabled=\"true\">Frame # {parseInt(currentFrame)+' / '+parseInt(duration * frame_rate)}</Button>\n            <Form style={{float: \"left\", width: 80}}>\n              <Form.File id=\"file\" label=\"Annotation Upload\" custom type=\"file\" onChange={handleOldAnnotation}/>\n            </Form>\n            <Form style={{float: \"left\", width: 80}}>\n              <Form.File id=\"file\" label=\"Video Upload\" custom type=\"file\" onChange={handleVideoUpload} />\n            </Form>\n            <Button variant=\"primary\" onClick={skip_frame_backward}>Prev Frame</Button>{' '}\n            <Button variant=\"primary\" onClick={handlePlaying}>{play_button_text}</Button>{' '}\n            <Button variant=\"primary\" onClick={skip_frame_forward}>Next Frame</Button>{' '}\n            <NewObjects />\n          </div>\n      </Navbar>\n      <Modal show={show} onHide={handleClose}>\n          <Modal.Header closeButton>\n          <Modal.Title>Instructions</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>TODO: Add instructions</Modal.Body>\n          <Modal.Footer>\n          <Button variant=\"secondary\" onClick={handleClose}>Close</Button>\n          </Modal.Footer>\n      </Modal>\n      <div style={{display: \"flex\"}}>\n        <div style={{position: \"relative\"}}>\n          <ReactPlayer \n            onProgress={handleSetCurrentFrame} \n            ref={handleSetPlayer} \n            onDuration={handleSetDuration} \n            url={\"https://www.youtube.com/watch?v=MF6J2H983HY\"} \n            width={window.innerWidth * scaling_factor} height={window.innerHeight * scaling_factor}\n            playing={playing} \n            controls={false} \n            style={{position:'realtive', float:'left'}}\n            volume={0}\n            muted={true}\n            pip={false}\n          />\n          <Fabric/>\n          <input\n            style={{width: window.innerWidth * scaling_factor}}\n            type='range' min={0} max={0.999999} step='any'\n            value={sliderPercent}\n            onMouseDown={handleSeekMouseDown}\n            onChange={handleSeekChange}\n            onMouseUp={handleSeekMouseUp}\n          />\n        </div>\n        <ChangeTable data={frame_data[currentFrame]} style={{ float: \"right\"}}/>\n      </div>\n    </div>\n  );\n}\n      //<ActiveObject />\n      //<input type=\"file\" onChange={handleVideoUpload1} />\n      //<div>\n        //<ReactPlayer url={videoFilePath1} width=\"50%\" height=\"50%\" controls={true} style={{position:'relative', float:'left'}}/>\n        //<Fabric/>\n      //</div>\n\nexport default MainYoutube;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport MainUpload from './ui_elements/Pages/main_upload'\n\nReactDOM.render(\n  <React.StrictMode>\n    <MainUpload></MainUpload>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}
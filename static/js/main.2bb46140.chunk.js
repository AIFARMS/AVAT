(this.webpackJsonpavat=this.webpackJsonpavat||[]).push([[0],{455:function(e){e.exports=JSON.parse('[{"src":"/assets/tensorflow.gif","altText":"Model assisted annotation","description":"Supports integration with pre-trained Tensorflow models to accelerate annotation","slide_time":10000},{"src":"/assets/add_remove.gif","altText":"Quickly add and remove annotations","description":"Add and remove annotations with ease with individual edits or whole frame edits","slide_time":8000},{"src":"/assets/segmentation.png","altText":"Segmentation","description":"Multiple dots across an object to help train AI models to identify objects in frame. This annotation can be coupled with behavior data.","slide_time":4000},{"src":"/assets/bounding_box.png","altText":"Bounding Box","description":"Rectangle that serves as a point of refrence for training object detection AI models. This annotation can be coupled with behavior data.","slide_time":4000},{"src":"/assets/annotation_count.png","altText":"Keep track of multiple annotations accross frames","description":"Full frame data summary helps keep track of multiple annotations by local and global id.","slide_time":4000},{"src":"/assets/youtube.png","altText":"Video Support","description":"Supports videos from Local Files, Youtube, Vimeo and Dailymotion","slide_time":4000}]')},461:function(e,t,a){e.exports=a(623)},466:function(e,t,a){},467:function(e,t,a){},491:function(e,t){},492:function(e,t){},493:function(e,t){},506:function(e,t){},507:function(e,t){},515:function(e,t){},525:function(e,t){},623:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),i=a(71),l=a.n(i),r=(a(466),a(467),a(176)),c=a.n(r),s=(a(152),a(6)),u=a(199),d=a(8),m=a(9),h=a(134).fabric,f=function(){function e(t,a,n,o,i,l,r){Object(d.a)(this,e),this.top=t,this.left=a,this.id=l,this.behavior=r,this.color=i,this.width=n,this.height=o}return Object(m.a)(e,[{key:"rectangle",value:function(){return new h.Rect({hasRotatingPoint:!1,height:this.height,width:this.width,fill:this.color,opacity:".4",top:this.top,left:this.left})}},{key:"id_text",value:function(){return new h.Text(this.id.toString(),{fontSize:20,top:this.top,left:this.left,uniScaleTransform:!1})}},{key:"generate_no_behavior",value:function(e){var t=new h.Group([this.rectangle(),this.id_text()],{borderColor:"#000000",hasBorders:!0,uniScaleTransform:!0});e.on({"object:scaling":function(e){var t=e.target.item(1),a=e.target,n=a.width/(a.width*a.scaleX),o=a.height/(a.height*a.scaleY);t.set("scaleX",n),t.set("scaleY",o)}});var a=this.id;return t.local_id=a,e.add(t),t.toJSON()}},{key:"generate_mouse_no_behavior",value:function(e){var t,a,n,o;new h.Text(this.id.toString(),{fontSize:20,top:this.top,left:this.left,uniScaleTransform:!1});e.on("mouse:down",(function(i){a=!0;var l=e.getPointer(i.e);n=l.x,o=l.y;l=e.getPointer(i.e);var r=new h.Rect({left:n,top:o,originX:"left",originY:"top",width:l.x-n,height:l.y-o,angle:0,fill:"rgba(255,0,0,0.5)",transparentCorners:!1,uniScaleTransform:!0});t=r,e.add(t)})),e.on("mouse:move",(function(i){if(a){var l=e.getPointer(i.e);n>l.x&&t.set({left:Math.abs(l.x)}),o>l.y&&t.set({top:Math.abs(l.y)}),t.set({width:Math.abs(n-l.x)}),t.set({height:Math.abs(o-l.y)}),e.renderAll()}})),e.on("mouse:up",(function(t){a=!1,e.off("mouse:down"),e.off("mouse:up")}))}}]),e}(),g=a(134).fabric,p=(a(221),function(){function e(t,a,n){Object(d.a)(this,e),this.frame_data=t.annotations,this.annotation_data=t.behavior_data,this.canvas=a,this.metadata=t.vid_metadata}return Object(m.a)(e,[{key:"get_frame_data",value:function(){return 1==this.check_legacy()?(alert("Legacy format detected - when exporting the format will be changed to the latest version automatically."),this.frame_data):this.scale_annotations()}},{key:"get_annotation_data",value:function(){return this.annotation_data}},{key:"check_legacy",value:function(){for(var e=0;e<this.frame_data.length;e++){var t=this.frame_data[e];if(null!=t&&void 0!==t.objects)return!0}return console.log("false"),!1}},{key:"scale_annotations",value:function(){var e=[];console.log(this.frame_data);for(var t=0;t<this.frame_data.length;t++){var a=[],n=this.frame_data[t];if(null!=n){for(var o=0;o<n.length;o++)if("bounding_box"===n[o].type){var i=parseInt(n[o].x)/parseInt(this.metadata.horizontal_res)*this.canvas.width,l=n[o].y/this.metadata.vertical_res*this.canvas.height,r=n[o].width/this.metadata.horizontal_res*this.canvas.width,c=n[o].height/this.metadata.vertical_res*this.canvas.height,s="#"+((1<<24)*Math.random()|0).toString(16),u=new f(l,i,r,c,s,n[o].local_id,"None").generate_no_behavior(this.canvas);a.push(u)}else if("segmentation"===n[o].type){for(var d=[],m=n[o].points,h=0;h<m.length;h++){var p=parseInt(m[h].x)/parseInt(this.metadata.horizontal_res)*this.canvas.width,v=m[h].y/this.metadata.vertical_res*this.canvas.height;d.push({x:p,y:v})}console.log(d);var b=new g.Polygon(d,{strokeWidth:1,stroke:"green",opacity:.5,scaleX:1,scaleY:1,objectCaching:!1,transparentCorners:!1,cornerColor:"blue",originX:"center",originY:"center"}),y=new g.Text(n[o].local_id,{fontSize:20,centerX:"center",top:d[0].y,left:d[0].x,uniScaleTransform:!1,fill:"white"}),E=new g.Group([b,y],{perPixelTargetFind:!0});console.log(E),E.lockMovementY=!0,E.lockMovementX=!0,E.selectable=!1,this.canvas.add(E),a.push(E.toJSON())}e.push({objects:a})}else e.push([])}return console.log(e),e}}]),e}()),v=(a(134).fabric,a(134).fabric);a(221);function b(e,t,a){var n=a.points[this.pointIndex].x-a.pathOffset.x,o=a.points[this.pointIndex].y-a.pathOffset.y;return v.util.transformPoint({x:n,y:o},v.util.multiplyTransformMatrices(a.canvas.viewportTransform,a.calcTransformMatrix()))}function y(e,t,a,n){var o=t.target,i=o.controls[o.__corner],l=o.toLocalPoint(new v.Point(a,n),"center","center"),r=o._getNonTransformedDimensions(),c=o._getTransformedDimensions(0,0),s={x:l.x*r.x/c.x+o.pathOffset.x,y:l.y*r.y/c.y+o.pathOffset.y};return o.points[i.pointIndex]=s,!0}var E=a(134).fabric,_=a(221),w=function(){function e(){Object(d.a)(this,e)}return Object(m.a)(e,[{key:"generate_polygon",value:function(e,t,a){var n,o=!0,i=new Array,l=new Array,r=!1,c=!1;e.forEachObject((function(e){e.selectable=!1})),e.selection=!1;var s=new function(){e.on("mouse:down",(function(e){e.target&&e.target.id===i[0].id&&0==c&&(s.polygon.generatePolygon(i),c=!0),o&&s.polygon.addPoint(e)})),e.on("mouse:up",(function(e){})),e.on("mouse:move",(function(t){if(n&&"line"==n.class){var a=e.getPointer(t.e,!1);n.set({x2:a.x,y2:a.y});var o=r.get("points");o[i.length]={x:a.x,y:a.y},r.set({points:o}),e.renderAll()}}))};s.polygon={drawPolygon:function(){o=!0,i=new Array,l=new Array},addPoint:function(t){var a=e.getPointer(t.e,!1),o=Math.floor(999901*Math.random())+99,c=(new Date).getTime()+o,s=new E.Circle({id:c,radius:2,fill:"#ffffff",stroke:"#333333",strokeWidth:.5,left:a.x,top:a.y,selectable:!1,hasBorders:!1,hasControls:!1,originX:"center",originY:"center",objectCaching:!1});s.selectable=!1,0===i.length?s.set({fill:"red",zindex:1}):s.set({zindex:0});var u=[a.x,a.y,a.x,a.y],d=new E.Line(u,{strokeWidth:2,fill:"#999999",stroke:"#999999",class:"line",originX:"center",originY:"center",selectable:!1,hasBorders:!1,hasControls:!1,evented:!1,objectCaching:!1});if(r){(u=r.get("points")).push({x:a.x,y:a.y});var m=new E.Polygon(u,{stroke:"#333333",strokeWidth:1,fill:"#cccccc",opacity:.3,selectable:!1,hasBorders:!1,hasControls:!1,evented:!1,objectCaching:!1});e.remove(r),e.add(m),r=m,e.renderAll()}else{var h=[{x:a.x,y:a.y}];console.log(h);m=new E.Polygon(h,{stroke:"#333333",strokeWidth:1,fill:"#cccccc",opacity:.3,selectable:!1,hasBorders:!1,hasControls:!1,evented:!1,objectCaching:!1});r=m,e.add(m)}n=d,i.push(s),l.push(d),e.add(s),e.selection=!1},generatePolygon:function(i){var c=new Array;_.each(i,(function(t,a){c.push({x:a.left,y:a.top}),e.remove(a)})),_.each(l,(function(t,a){e.remove(a)})),console.log(i),console.log(l);var s=new E.Polygon(c,{strokeWidth:1,stroke:"green",opacity:.5,scaleX:1,scaleY:1,objectCaching:!1,transparentCorners:!1,cornerColor:"blue",originX:"center",originY:"center"});s.local_id=t,s.lockMovementY=!0,s.lockMovementX=!0,console.log(t),console.log(s),e.remove(r),a();var u=new E.Text(t.toString(),{fontSize:20,centerX:"center",top:i[0].top,left:i[0].left,uniScaleTransform:!1,fill:"white"}),d=new E.Group([s,u],{perPixelTargetFind:!0,hasControls:!1,hasBorders:!1});d.lockMovementY=!0,d.lockMovementX=!0,d.selectable=!1,d.local_id=t,console.log(d),e.add(d),console.log(d._objects[0]),console.log(d),e.remove(n),e.remove(r),n=null,r=null,o=!1,e.forEachObject((function(e){e.selectable=!0}))}}}}]),e}(),k=a(99),O=a.n(k),S=[{value:"Feeding",label:"Feeding"},{value:"Drinking",label:"Drinking"},{value:"Exploratory",label:"Exploratory"},{value:"Social",label:"Social"},{value:"Locomotion",label:"Locomotion"},{value:"Proximity",label:"Proximity"},{value:"Others",label:"Others"}],j=[{value:"Lying",label:"Lying"},{value:"Sitting",label:"Sitting"},{value:"Kneeling",label:"Kneeling"},{value:"Standing",label:"Standing"}],x=[{value:"Stationary",label:"Stationary"},{value:"Minor",label:"Minor"},{value:"Stationary Transition",label:"Stationary Transition"},{value:"Active Transition",label:"Active Transition"},{value:"Active",label:"Active"},{value:"Event",label:"Event"}],C=[{value:"Unambigous",label:"Unambigous"},{value:"Reliable",label:"Reliable"},{value:"Seperated",label:"Seperated"},{value:"Part-missing",label:"Part-missing"},{value:"Suspected",label:"Suspected"}],T=a(44),A=function(e){return[{dataField:"id",text:"ID",headerStyle:function(){return{width:"40px",left:0}},editable:!1},{dataField:"global_id",text:"Glo",headerStyle:function(){return{width:"70px",left:0}}},{dataField:"posture",text:"Posture",editor:{type:k.Type.SELECT,options:j}},{dataField:"behavior",text:"Behavior",editor:{type:k.Type.SELECT,options:S}},{dataField:"confidence",text:"Confidence",editor:{type:k.Type.SELECT,options:C}},{dataField:"remove",text:"Del",editable:!1,headerStyle:function(){return{width:"50px",left:0}},headerFormatter:function(){return o.a.createElement("div",null,"Del",o.a.createElement(T.a,{className:"btn btn-danger btn-xs",onClick:function(){return e()},label:"Del"}))},formatter:function(t,a){return o.a.createElement("div",null,o.a.createElement(T.a,{className:"btn btn-danger btn-xs",onClick:function(){return e(a.id)},label:"Del"}))}}]},N=a(165),F=a(132),M=a(633),I=a(196),R=a(76),D=a(66),P=a(634),B=a(47),L=a(453),V=a.n(L);a(503);function U(){return o.a.createElement("div",null,o.a.createElement("h3",null,"Keybinds:"),"There are preset keybinds setup to make it easier to use the tool without having to click around. If done properly a combination of mouse and keyboard actions speed up the annotation process.",o.a.createElement("br",null),o.a.createElement("br",null),"* ",o.a.createElement("kbd",null,"1")," : Mode Switch: Behavior",o.a.createElement("br",null),"* ",o.a.createElement("kbd",null,"2")," : Mode Switch: Bounding Box",o.a.createElement("br",null),"* ",o.a.createElement("kbd",null,"3")," : Mode Switch: Segmentation",o.a.createElement("br",null),"* ",o.a.createElement("kbd",null,"a")," : Add annotation",o.a.createElement("br",null),"* ",o.a.createElement("kbd",null,"e")," : Skip forward frame(s)",o.a.createElement("br",null),"* ",o.a.createElement("kbd",null,"q")," : Skip backward frame(s)",o.a.createElement("br",null),"* ",o.a.createElement("kbd",null,"w")," : Pause/Play",o.a.createElement("br",null),"* ",o.a.createElement("kbd",null,"c")," : Copy previous annotation",o.a.createElement("br",null),"* ",o.a.createElement("kbd",null,"f")," : Activate/Deactivate scrub mode (Activated by default)",o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("h3",null,"Uploading Video:"),'Ensure that you know the framerate of the video chosen to be annotated. These values should be entered into the settings tab into their "frame rate" fields.',o.a.createElement("br",null),o.a.createElement("br",null),"Click on the right side browse button. All other buttons on the screen shuold be disabled until the video has been uploaded. Currenntly ```.mp4``` format is the best choice and tested for. Other file types such as .avi are supported but might have unintended bugs.",o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("h3",null,"Annotations"),o.a.createElement("br",null),"There are currently three kinds of annotations.",o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("h4",null,"Behavior Annotation:"),"This is for having annotations that do not have any visual attribute attached to it. This annotation is also attached by default when the bounding box or segmentation annotation is created.",o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("h4",null,"Bounding Box:"),"This forms a square around the desired object. There should be small squares at the edges of the bounding box which can be used to resize the box. The number on the top left of the box is used to identify the placement of the box in the table to the right.",o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("h4",null,"Segmentation:"),'Upon generating this each click on the video generates a point which eventually will transform to a set of interconnected points. To complete the polygon click on the original point generated (which is the red colored point) If there is a need to edit, then click on the "Edit Seg" button to start the editing process.')}var z=a(10),K=a.n(z),Y=a(16);function J(){return(J=Object(Y.a)(K.a.mark((function e(t,a,n,o,i){var l,r,c,s,u;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l="generated_annotations",""!==t&&""!==a&&(l=t.split(".").slice(0,-1).join(".")+"_"+a),console.log(o),r=JSON.stringify({vid_metadata:i,annotations:n,behavior_data:o}),c=new Blob([r],{type:"application/json"}),e.next=7,URL.createObjectURL(c);case 7:s=e.sent,(u=document.createElement("a")).href=s,u.download=l+".json",document.body.appendChild(u),u.click(),document.body.removeChild(u);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e,t){console.log(t);for(var a=new Array(e.length+1),n=0;n<a.length;n++)a[n]=[];a[0].push("frame_num");for(n=0;n<t.length;n++)a[0].push(t[n].dataField);for(n=0;n<e.length;n++){for(var o=0;o<e[n].length;o++){a[n+1][o]=[];var i=e[n][o],l=Object.keys(i).map((function(e){return i[e]}));a[n+1][o]=n+","+l.join(",")}a[n+1]=a[n+1].join("\n")}return a=a.join("\n")}function H(){return(H=Object(Y.a)(K.a.mark((function e(t,a,n,o){var i,l,r,c,s;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="generated_annotations",""!==t&&""!==a&&(i=t.split(".").slice(0,-1).join(".")+"_"+a),l=X(n,o("")),r=new Blob([l],{type:"application/octet-stream"}),e.next=6,URL.createObjectURL(r);case 6:c=e.sent,(s=document.createElement("a")).href=c,s.download=i+".csv",document.body.appendChild(s),s.click(),document.body.removeChild(s);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(622),a(621);var W=a(322);function q(){return(q=Object(Y.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return alert("Loading model\nThis might take a second or so..."),e.next=3,W.load();case 3:e.sent.dispose(),W.load({base:t});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=a(535),Q=(a(258),a(134).fabric),Z=a(221),$=function(){var e=Object(Y.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"pascal",4,e.next=4,G.load({base:"pascal",quantizationBytes:4});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function ee(){return(ee=Object(Y.a)(K.a.mark((function e(t,a,n,o,i){var l;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=document.getElementsByTagName("video")[0],console.log(l.height),$().then((function(e){return e.segment(l)})).then((function(e){var a=e.segmentationMap,n=e.width,o=e.height;e.legend;console.log(a),console.log(t.getHeight()),console.log(t.getWidth());var i=new ImageData(a,n,o),l=document.createElement("canvas");l.setAttribute("id","_temp_canvas"),l.width=n,l.height=o,l.getContext("2d").putImageData(i,0,0),Q.Image.fromURL(l.toDataURL(),(function(e){e.left=0,e.top=0,e.opacity=.5,e.scaleX=t.getHeight()/o,e.scaleY=t.getWidth()/n,t.add(e),e.bringToFront(),l=null,Z("#_temp_canvas").remove(),t.renderAll()}))}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var te=function(){function e(t,a,n,o){Object(d.a)(this,e),this.frame_data=t,this.canvas=a,this.metadata=n,this.image_data=o}return Object(m.a)(e,[{key:"get_frame_json",value:function(){console.log(this.frame_data[0][0].get("type"));var e=new Array(this.frame_data.length);console.log(this.metadata);for(var t=0;t<this.frame_data.length;t++){var a=[];if(this.frame_data[t]!=[]){var n=this.frame_data[t];if(void 0!=n){for(var o=0;o<n.length;o++)if(console.log(n[o]._objects),"group"===n[o].get("type"))if("rect"===n[o]._objects[0].type){console.log(n[o]);var i=n[o].left/this.canvas.width*this.metadata.horizontal_res,l=n[o].top/this.canvas.height*this.metadata.vertical_res,r=n[o].width*n[o].scaleX/this.canvas.width*this.metadata.horizontal_res,c=n[o].height*n[o].scaleY/this.canvas.height*this.metadata.vertical_res,s=n[o]._objects[1].text;0!=this.image_data.length?a.push({type:"bounding_box",x:i,y:l,width:r,height:c,local_id:s,"fileName:":this.image_data[t].name,dataType:"image"}):a.push({type:"bounding_box",x:i,y:l,width:r,height:c,local_id:s,"fileName:":this.metadata.name,dataType:"video"})}else if("polygon"===n[o]._objects[0].type){for(var u=n[o]._objects[0].points,d=[],m=0;m<u.length;m++){i=u[m].x/this.canvas.width*this.metadata.horizontal_res,l=u[m].y/this.canvas.height*this.metadata.vertical_res;d.push({x:i,y:l})}s=n[o]._objects[1].text;0!=this.image_data.length?a.push({type:"segmentation",points:d,local_id:s,"fileName:":this.image_data[t].name,dataType:"image"}):a.push({type:"segmentation",points:d,local_id:s,"fileName:":this.metadata.name,dataType:"video"})}e[t]=a}}}return e}},{key:"get_frame_json_fullCanvas",value:function(){var e=new Array(this.frame_data.length);console.log(this.metadata);for(var t=0;t<this.frame_data.length;t++){var a=[];if(this.frame_data[t]!=[]){var n=this.frame_data[t].objects;if(void 0!=n){for(var o=0;o<n.length;o++)if(console.log(n[o]),"group"===n[o].type)if("rect"===n[o].objects[0].type){console.log(n[o]);var i=n[o].left/this.canvas.width*this.metadata.horizontal_res,l=n[o].top/this.canvas.height*this.metadata.vertical_res,r=n[o].width*n[o].scaleX/this.canvas.width*this.metadata.horizontal_res,c=n[o].height*n[o].scaleY/this.canvas.height*this.metadata.vertical_res,s=n[o].objects[1].text;0!=this.image_data.length?a.push({type:"bounding_box",x:i,y:l,width:r,height:c,local_id:s,"fileName:":this.image_data[t].name,dataType:"image"}):a.push({type:"bounding_box",x:i,y:l,width:r,height:c,local_id:s,"fileName:":this.metadata.name,dataType:"video"})}else if("polygon"===n[o].objects[0].type){for(var u=n[o].objects[0].points,d=[],m=0;m<u.length;m++){i=u[m].x/this.canvas.width*this.metadata.horizontal_res,l=u[m].y/this.canvas.height*this.metadata.vertical_res;d.push({x:i,y:l})}s=n[o].objects[1].text;0!=this.image_data.length?a.push({type:"segmentation",points:d,local_id:s,"fileName:":this.image_data[t].name,dataType:"image"}):a.push({type:"segmentation",points:d,local_id:s,"fileName:":this.metadata.name,dataType:"video"})}e[t]=a}}}return e}},{key:"get_frame_coco",value:function(){}}]),e}(),ae=a(198),ne=a(637);function oe(e,t,a){return ie.apply(this,arguments)}function ie(){return(ie=Object(Y.a)(K.a.mark((function e(t,a,n){var o,i,l,r,c,s,u,d,m,h,f,g,p;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=document.getElementById("process_vid"),i=o.duration*t,console.log(i),console.log(o.duration),l=document.createElement("canvas"),r=l.getContext("2d"),c=[o.videoWidth,o.videoHeight],s=c[0],u=c[1],l.width=s,l.height=u,d=[],r.drawImage(o,0,0,s,u),m=l.toDataURL(),d.push(m),o.addEventListener("seeked",Object(Y.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h&&h();case 1:case"end":return e.stop()}}),e)})))),f=1;case 15:if(!(f<i)){e.next=28;break}return g=parseFloat(f/i*o.duration),console.log(g),o.currentTime=g,n((f/(i-1)*100).toFixed(2).toString()+"%completed    |   "+(f+1).toString()+"/"+i.toString()+" frames processed."),e.next=22,new Promise((function(e){return h=e}));case 22:r.drawImage(o,0,0,s,u),p=l.toDataURL(),d.push(p);case 25:f+=a,e.next=15;break;case 28:return e.abrupt("return",d);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var le=[];function re(e){var t=Object(n.useState)(!0),a=Object(s.a)(t,2),i=a[0],l=a[1],r=function(){return l(!1)},c=Object(n.useState)(null),u=Object(s.a)(c,2),d=u[0],m=u[1],h=Object(n.useState)(""),f=Object(s.a)(h,2),g=f[0],p=f[1],v=function(e){p(e)};return console.log(le),o.a.createElement(B.a,{show:i,onHide:r,size:"lg"},o.a.createElement(B.a.Header,{closeButton:!0},o.a.createElement(B.a.Title,null,"Processing Video...")),o.a.createElement(B.a.Body,null,o.a.createElement("div",null,o.a.createElement("video",{id:"process_vid",style:{objectFit:"contain",height:"100%",width:"100%"},src:e.video_link}),o.a.createElement(T.a,{onClick:function(t){if(0!==e.frame_rate){a=oe(e.frame_rate);m(a),le=a,console.log(a)}else var a=oe(15,15,v).then((function(e){m(e),le=e,console.log(e)}))},enable:null!=d},"Process Video"),g,null!=d&&o.a.createElement(ae.a,{controls:!0,fade:!0,style:{objectFit:"contain",height:"100%",width:"100%"}},d.map((function(e){return o.a.createElement(ae.a.Item,null,"eee",o.a.createElement(ne.a,{className:"mb-5 box-shadow",top:!0,width:"100%"},o.a.createElement(ne.a.Img,{style:{objectFit:"contain",height:"100%",width:"100%"},src:e})))}))))),o.a.createElement(B.a.Footer,null,o.a.createElement(T.a,{variant:"secondary",onClick:r},"Close")))}function ce(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),i=a[0],l=a[1],r=Object(n.useState)(!0),c=Object(s.a)(r,2),u=c[0],d=c[1],m=Object(n.useState)(0),h=Object(s.a)(m,2),f=h[0],g=h[1],p=Object(n.useState)(0),E=Object(s.a)(p,2),_=E[0],w=E[1],k=Object(n.useState)(0),O=Object(s.a)(k,2),S=(O[0],O[1],Object(n.useState)(0)),j=Object(s.a)(S,2),x=(j[0],j[1],Object(n.useState)(0)),C=Object(s.a)(x,2),A=(C[0],C[1],Object(n.useState)(0)),L=Object(s.a)(A,2),z=L[0],K=L[1],Y=Object(n.useState)(""),X=Object(s.a)(Y,2),W=X[0],G=X[1],Q=Object(n.useState)(""),Z=Object(s.a)(Q,2),$=Z[0],ae=Z[1],ne=Object(n.useState)(!1),oe=Object(s.a)(ne,2),ie=oe[0],le=oe[1],ce=function(){return l(!1)},se=function(){d(!1),le(!0)},ue=function(e){"string"===typeof e?(G(e.target.value),console.log(e.target.value)):G(URL.createObjectURL(e.target.files[0]))};return o.a.createElement("div",null,2==ie&&o.a.createElement(re,{frame_rate:_,video_link:W}),o.a.createElement(B.a,{show:i,onHide:ce,size:"lg"},o.a.createElement(B.a.Header,{closeButton:!0},o.a.createElement(B.a.Title,null,"Instructions")),o.a.createElement(B.a.Body,null,o.a.createElement(U,null)),o.a.createElement(B.a.Footer,null,o.a.createElement(T.a,{variant:"secondary",onClick:ce},"Close"))),o.a.createElement(B.a,{show:u,onHide:se,size:"lg"},o.a.createElement(B.a.Header,{closeButton:!0},o.a.createElement(B.a.Title,null,"Upload")),o.a.createElement(B.a.Body,null,o.a.createElement("div",{style:{display:"grid"}},o.a.createElement(R.a,{style:{float:"left",gridColumn:1,gridRow:1,zIndex:99}},"Video Format:",o.a.createElement(R.a.Control,{as:"select",id:"inlineFormCustomSelect",onChange:function(t){var a;a=t.target.value,console.log(a),0===(a=parseInt(a))?K(0):1===a?K(1):2===a&&(K(2),e.handleInputType(1))},defaultValue:z},o.a.createElement("option",{value:"0"},"Upload"),o.a.createElement("option",{value:"1"},"Youtube"),o.a.createElement("option",{value:"2"},"Image")),o.a.createElement(M.a.Divider,null)),o.a.createElement("div",{style:{float:"left",gridColumn:1,gridRow:2,zIndex:99}},"Annotator Name: ",o.a.createElement("input",{type:"text",defaultValue:e.ANNOTATOR_NAME,onClick:function(t){e.toggleKeyCheck(!1)},onBlur:function(t){e.toggleKeyCheck(!0)},onChange:function(t){e.change_annotator_name(t.target.value)}}),o.a.createElement(M.a.Divider,null)),o.a.createElement("div",{style:{float:"left",gridColumn:1,gridRow:3,zIndex:99}},o.a.createElement("text",null,"Date and Time: "),o.a.createElement(V.a,{selected:f,onChange:function(t){!function(t){g(t);try{e.setDateTime(Math.floor(t.getTime()/1e3))}catch(a){alert("Invalid date input!")}}(t)},timeInputLabel:"Time:",dateFormat:"yyyy/MM/dd hh:mm",showTimeInput:!0,onClick:function(t){e.toggleKeyCheck(!1)},onClickOutside:function(t){e.toggleKeyCheck(!0)},onCalendarOpen:function(t){e.toggleKeyCheck(!1)},onCalendarClose:function(t){e.toggleKeyCheck(!0)}}),o.a.createElement(M.a.Divider,null)),0===z&&o.a.createElement(R.a,{style:{float:"left",gridColumn:1,gridRow:4}},o.a.createElement(R.a.File,{multiple:!0,id:"file",label:"Video Upload",accept:".mp4",custom:!0,type:"file",onChange:function(t){e.handleVideoUpload(t),ue(t)}})),1===z&&o.a.createElement("div",null,o.a.createElement("text",null,"Youtube URL: "),o.a.createElement("input",{onChange:ue}),o.a.createElement(T.a,{onClick:function(t){e.handleVideoUpload(W)}},"Upload")),2===z&&o.a.createElement(R.a,{style:{float:"left",gridColumn:1,gridRow:4}},o.a.createElement(R.a.File,{multiple:!0,id:"file",label:"Image-set Upload",accept:"image/*",custom:!0,type:"file",onChange:function(t){e.handleVideoUpload(t),ue(t)}})),o.a.createElement(R.a,{style:{float:"left",gridColumn:1,gridRow:5}},o.a.createElement(R.a.File,{disabled:e.disable_buttons,accept:".json",id:"file",label:"Annotation Upload",custom:!0,type:"file",onChange:e.handleOldAnnotation})),o.a.createElement(M.a.Divider,null),"Frame Rate: ",o.a.createElement("input",{type:"number",value:e.frame_rate,onClick:function(t){e.toggleKeyCheck(!1)},onBlur:function(t){e.toggleKeyCheck(!0)},onChange:function(t){e.setFrameRate(parseInt(t.target.value)),w(parseInt(t.target.value))}}),o.a.createElement(M.a.Divider,null),"Skip Value: ",o.a.createElement("input",{type:"number",defaultValue:"1",onChange:function(t){e.change_skip_value(parseInt(t.target.value))}}),"Playback Rate: ",o.a.createElement("input",{type:"number",defaultValue:"1",onChange:function(t){e.handleSetPlaybackRate(parseInt(t.target.value))}}),o.a.createElement(M.a.Divider,null),o.a.createElement("div",null,"Enable Object Detection Model:"," ",o.a.createElement("select",{defaultValue:$,onChange:function(e){ae(e.target.value)},id:"base_model"},o.a.createElement("option",{value:""},"Select"),o.a.createElement("option",{value:"lite_mobilenet_v2"},"SSD Lite Mobilenet V2"),o.a.createElement("option",{value:"mobilenet_v1"},"SSD Mobilenet v1"),o.a.createElement("option",{value:"mobilenet_v2"},"SSD Mobilenet v2"))," ",o.a.createElement(T.a,{size:"sm",variant:"outline-success",onClick:function(e){""===$&&alert("Please select a model"),function(e){q.apply(this,arguments)}($)}},"Enable")),o.a.createElement(M.a.Divider,null))),o.a.createElement(B.a.Footer,null,o.a.createElement(T.a,{variant:"success",onClick:se},"Upload"))),o.a.createElement(N.a,{sticky:"top",bg:"dark",variant:"dark",className:"bg-5"},o.a.createElement(N.a.Brand,{href:"#home"},"AVAT"),o.a.createElement(F.a,{className:"mr-auto"},o.a.createElement(M.a,{disabled:e.disable_buttons,title:"Export",id:"basic-nav-dropdown"},o.a.createElement(M.a.Item,{onClick:function(){var t=new te(e.frame_data,e.fabricCanvas,e.VIDEO_METADATA,e.image_frames).get_frame_json();!function(e,t,a,n,o){J.apply(this,arguments)}(e.ANNOTATION_VIDEO_NAME,e.ANNOTATOR_NAME,t,e.annotation_data,e.VIDEO_METADATA)}},"JSON"),o.a.createElement(M.a.Divider,null),o.a.createElement(M.a.Item,{onClick:function(){!function(e,t,a,n){H.apply(this,arguments)}(e.ANNOTATION_VIDEO_NAME,e.ANNOTATOR_NAME,e.annotation_data,e.columns)}},"CSV")),o.a.createElement(I.a,{onClick:function(){return l(!0)}},"Instructions"),o.a.createElement(I.a,{onClick:e.handle_link_open},"Report")),o.a.createElement("div",null,$.length>0&&o.a.createElement(T.a,{id:"run",variant:"outline-info",onClick:function(t){!function(e,t,a,n,o){ee.apply(this,arguments)}(e.fabricCanvas,e.annotation_data,e.currentFrame,e.save_data,e.handle_visual_toggle),e.handle_visual_toggle()}},"Run model"),o.a.createElement(T.a,{variant:"outline-success",onClick:function(){return d(!0)}},"Upload")," ",o.a.createElement(T.a,{variant:"outline-success",onClick:function(t){!function(e){var t=e.getActiveObject();if(void 0!=t&&null!=t)if(void 0!=t._objects||void 0!=t.points){var a;if("group"===t.type){a=t._objects[0];t._objects[1];t.destroy(),e.remove(t),e.add(a)}else"polygon"===t.type&&(a=t);if(e.setActiveObject(a),a.edit=!a.edit,a.edit){var n=a.points.length-1;a.cornerStyle="circle",a.cornerColor="rgba(0,0,255,0.5)",a.controls=a.points.reduce((function(e,t,a){var o,i;return e["p"+a]=new v.Control({positionHandler:b,actionHandler:(o=a>0?a-1:n,i=y,function(e,t,a,n){var l=t.target,r=v.util.transformPoint({x:l.points[o].x-l.pathOffset.x,y:l.points[o].y-l.pathOffset.y},l.calcTransformMatrix()),c=i(e,t,a,n),s=(l._setPositionDimensions({}),l._getNonTransformedDimensions()),u=(l.points[o].x-l.pathOffset.x)/s.x,d=(l.points[o].y-l.pathOffset.y)/s.y;return l.setPositionByOrigin(r,u+.5,d+.5),c}),actionName:"modifyPolygon",pointIndex:a}),e}),{})}else{a.cornerColor="blue",a.cornerStyle="rect",a.controls=v.Object.prototype.controls;var o=new v.Text(a.local_id.toString(),{fontSize:20,top:a.points[0].y,left:a.points[0].x,uniScaleTransform:!1,fill:"white"}),i=new v.Group([a,o]);i.local_id=a.local_id,i.lockMovementY=!0,i.lockMovementX=!0,e.remove(a),e.add(i),console.log(e.getObjects())}a.hasBorders=!a.edit,e.requestRenderAll()}else alert("Please select a segmentation");else alert("Please select a segmentation")}(e.fabricCanvas,e.save_data),e.toggle_segmentation()}},"Edit Seg")," ",o.a.createElement(D.a,{as:P.a},o.a.createElement(T.a,{variant:"secondary",disabled:!0},e.display_frame_num)," ",o.a.createElement(D.a.Toggle,{split:!0,variant:"secondary",id:"dropdown-split-basic"}),o.a.createElement(D.a.Menu,null,"Skip Value: ",o.a.createElement("input",{type:"number",defaultValue:"1",onChange:function(t){e.change_skip_value(parseInt(t.target.value))}}),"Playback Rate: ",o.a.createElement("input",{type:"number",defaultValue:"1",onChange:function(t){e.handleSetPlaybackRate(parseInt(t.target.value))}})))," ",o.a.createElement(T.a,{variant:"primary",disabled:e.disable_buttons,onClick:e.skip_frame_backward},"Prev")," ",o.a.createElement(T.a,{variant:"primary",disabled:e.disable_buttons,onClick:e.handlePlaying},e.play_button_text)," ",o.a.createElement(T.a,{variant:"primary",disabled:e.disable_buttons,onClick:e.skip_frame_forward},"Next")," ",o.a.createElement(D.a,{as:P.a,drop:"left"},o.a.createElement(T.a,{variant:"success",onClick:e.addToCanvas},"Add"),o.a.createElement(D.a.Toggle,{split:!0,variant:"success",id:"dropdown-split-basic"}),o.a.createElement(D.a.Menu,null,o.a.createElement(D.a.Item,{onClick:function(t){e.change_annotation_type("1")}},"Behavior Annotation"),o.a.createElement(D.a.Item,{onClick:function(t){e.change_annotation_type("2")}},"BoundingBox"),o.a.createElement(D.a.Item,{onClick:function(t){e.change_annotation_type("3")}},"KeyPoint"),o.a.createElement(D.a.Item,{onClick:function(t){e.change_annotation_type("4")}},"Segmentation"))))))}var se=a(56),ue=a(55),de=function(e){Object(se.a)(a,e);var t=Object(ue.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=l.a.findDOMNode(this);this.props.fabricCanvas.initialize(t,{height:this.props.scaling_factor_height,width:this.props.scaling_factor_width,backgroundColor:null}),this.props.fabricCanvas.on("mouse:up",(function(){e.props.save_data(e.props.currentFrame)})),this.props.fabricCanvas.on("object:added",this.props.save_data(this.props.currentFrame)),this.props.fabricCanvas.on("object:removed",this.props.save_data(this.props.currentFrame)),this.props.fabricCanvas.on("object:modified",this.props.save_data(this.props.currentFrame)),this.props.fabricCanvas.on("saveData",(function(){e.props.fabricCanvas.renderAll()}))}},{key:"render",value:function(){return o.a.createElement("canvas",{id:"canvas"})}}]),a}(o.a.Component),me=a(219),he=a.n(me),fe=(a(391),a(220)),ge=a.n(fe),pe=a(454),ve=a(323),be=a(452);function ye(e){var t,a={onlyOneExpanding:!0,renderer:function(t,a){return o.a.createElement("div",null,o.a.createElement(be.a,{as:"textarea","aria-label":"With textarea",defaultValue:e.annotation_data[e.currentFrame][a].notes,onChange:function(e){n(e,a)},onClick:function(t){e.toggleKeyCheck(!1)},onBlur:function(t){e.toggleKeyCheck(!0)}}))}},n=function(t,a){console.log(e.annotation_data[e.currentFrame]),e.annotation_data[e.currentFrame][a].notes=t.target.value,console.log(e.annotation_data[e.currentFrame])},i=function(e){for(var t=[],a=0;a<e.length;a++)if(0!==e[a].length){for(var n="",o="",i=0;i<e[a].length;i++)n+=e[a][i].id+", ",o+=e[a][i].global_id+", ";t.push({frame_num:a,anno_count:e[a].length,local_ids:n,global_ids:o})}return t}(e.annotation_data);return o.a.createElement(pe.a,{defaultActiveKey:"home",id:"uncontrolled-tab-example"},o.a.createElement(ve.a,{eventKey:"home",title:"Current"},o.a.createElement(he.a,{keyField:"id",data:e.annotation_data[e.currentFrame],columns:e.columns(e.remove_table_index),table:!0,noDataIndication:function(){return o.a.createElement("div",null,"No recorded annotations or behaviors for this frame",o.a.createElement("br",null),"Please add an annotation or behavior tag to start.")},cellEdit:O()({mode:"click",blurToSave:!0,afterSaveCell:function(t,a,n,o){console.log(n),e.toggleKeyCheck(!0)},onStartEdit:function(t,a,n,o){e.toggleKeyCheck(!1)}}),pagination:ge()(),expandRow:a})),o.a.createElement(ve.a,{eventKey:"profile",title:"Previous"},o.a.createElement(he.a,{keyField:"frame_num",data:i,columns:(t=e.handleSetCurrentFrame,[{dataField:"frame_num",text:"Frame",headerStyle:function(){return{width:"40px",left:0}}},{dataField:"anno_count",text:"Count",headerStyle:function(){return{width:"40px",left:0}}},{dataField:"local_ids",text:"Local ID",headerStyle:function(){return{width:"40px",left:0}}},{dataField:"global_ids",text:"Global ID",headerStyle:function(){return{width:"40px",left:0}}},{dataField:"swap",text:"Swap",editable:!1,headerStyle:function(){return{width:"50px",left:0}},formatter:function(e,a){return o.a.createElement(T.a,{className:"btn btn-confirm btn-xs",label:"Del",onClick:function(){t(a.frame_num)}},"Skip")}}]),table:!0,noDataIndication:function(){return o.a.createElement("div",null,"No recorded annotations or behaviors for this video.")},pagination:ge()()})))}"undefined"===typeof Storage&&alert("Your browser does not support local storage. \nSome autosaving features of the app will not work as intended.\nPlease see the documentation to find supported browsers and their versions");var Ee=a(134).fabric,_e=15,we=-1,ke=1920,Oe=1080,Se=1;console.log(window.screen.width),console.log(window.screen.height);var je=window.screen.height;je>=1080?(ke=1280,Oe=720):je>=1024?(ke=1152,Oe=648):je>=768&&(ke=1024,Oe=576);var xe,Ce,Te=new Ee.Canvas("c",{uniScaleTransform:!0,uniformScaling:!1,includeDefaultValues:!1});Te.on("mouse:over",(function(e){null==e.target|1==He||void 0!=e.target._objects&&(Ce=e.target._objects[0].get("fill"),e.target._objects[0].set("fill","#39FF14"),Te.renderAll())})),Te.on("mouse:out",(function(e){null==e.target|1==He||void 0!=e.target._objects&&(e.target._objects[0].set("fill",Ce),Te.renderAll())})),Ee.Image.prototype.toObject=(xe=Ee.Image.prototype.toObject,function(){return Ee.util.object.extend(xe.call(this),{src:this.toDataURL()})}),Te.on("mouse:wheel",(function(e){var t=e.e.deltaY,a=Te.getZoom();(a*=Math.pow(.999,t))>20&&(a=20),a<.01&&(a=.01),Te.zoomToPoint({x:e.e.offsetX,y:e.e.offsetY},a),e.e.preventDefault(),e.e.stopPropagation()})),Te.on("mouse:down",(function(e){var t=e.e;!0===t.altKey&&(this.isDragging=!0,this.selection=!1,this.lastPosX=t.clientX,this.lastPosY=t.clientY)})),Te.on("mouse:move",(function(e){if(this.isDragging){var t=e.e,a=this.viewportTransform;a[4]+=t.clientX-this.lastPosX,a[5]+=t.clientY-this.lastPosY,this.requestRenderAll(),this.lastPosX=t.clientX,this.lastPosY=t.clientY}})),Te.on("mouse:up",(function(e){this.setViewportTransform(this.viewportTransform),this.isDragging=!1,this.selection=!0}));var Ae,Ne=0,Fe=0,Me=[[]],Ie=[[]],Re=!1,De=!0,Pe=0,Be="",Le=[],Ve=[],Ue="",ze="",Ke={},Ye="ERROR",Je=!1,Xe=0,He=!1,We=!1,qe=[],Ge=0;function Qe(e){0!=Te.getObjects().length?(Me[e]=Te.getObjects(),Me[e].backgroundImage=null):Me[e]=[],console.log("SAVED")}function Ze(){var e=Object(n.useState)(0),t=Object(s.a)(e,2),a=(t[0],t[1]),i=Object(n.useState)("1"),l=Object(s.a)(i,2),r=l[0],d=l[1],m=Object(n.useState)(0),h=Object(s.a)(m,2),g=h[0],v=h[1],b=Object(n.useState)(null),y=Object(s.a)(b,2),E=y[0],_=y[1],k=Object(n.useState)(null),O=Object(s.a)(k,2),S=(O[0],O[1],Object(n.useState)(null)),j=Object(s.a)(S,2),x=j[0],C=j[1],T=Object(n.useState)(null),N=Object(s.a)(T,2),F=N[0],M=N[1],I=Object(n.useState)(0),R=Object(s.a)(I,2),D=R[0],P=R[1],B=Object(n.useState)(!1),L=Object(s.a)(B,2),V=(L[0],L[1],Object(n.useState)(!1)),U=Object(s.a)(V,2),z=U[0],K=U[1],Y=Object(n.useState)(!1),J=Object(s.a)(Y,2),X=(J[0],J[1]),H=Object(n.useState)(!1),W=Object(s.a)(H,2),q=W[0],G=W[1],Q=Object(n.useState)(!0),Z=Object(s.a)(Q,2),$=Z[0],ee=Z[1],te=Object(n.useState)(1),ae=Object(s.a)(te,2),ne=ae[0],oe=ae[1],ie=Object(n.useState)(0),le=Object(s.a)(ie,2),re=le[0],se=le[1],ue=Object(n.useState)(0),me=Object(s.a)(ue,2),he=me[0],fe=me[1],ge=Object(n.useState)(0),pe=Object(s.a)(ge,2),ve=pe[0],be=pe[1];He||Te.forEachObject((function(e){e.selectable=!0,e.evented=!0}));var je=function(e){if(Ae=D*_e,st(),"number"===typeof e){fe(e),a(Math.floor(999999999999*Math.random()));var t=e/Ae;t>D&&(t=D),F.seekTo(t)}else{Qe(he);var n=e.played;if(n=Math.floor(e.played*Ae),("Play"===Ye&&!0===Je)|"Pause"===Ye){if(n>=Ae)return fe(Ae-1),a(Math.floor(999999999999*Math.random())),void(Je=!1);fe(n),a(Math.floor(999999999999*Math.random())),Je=!1}a(Math.floor(999999999999*Math.random()))}},xe=function(e){for(var t=0,a=0;a<Ie[he].length;a++)if(Ie[he][a].id==e){t=a;break}if("f"!==e.substring(e.length-1,e.length)){var n=Te.getObjects();for(a=0;a<n.length;a++)if(console.log(n[a]),n[a]._objects[1].text===e){console.log("REMOVED"),console.log(n[a]),Te.remove(n[a]),Te.fire("saveData"),Te.renderAll();break}}Ie[he].splice(t,1),Qe(he)},Ce=function(){0!=Ie[he].length&&(Le=Ie[he],Ve=Me[he])},Ze=function(){var e="#"+((1<<24)*Math.random()|0).toString(16);if(null==Ie[he]&&(Ie[he]=[]),1!=He){var t="error";if("2"===r){t="b";new f(Te.height/2,Te.width/2,50,50,e,g+"b","None").generate_no_behavior(Te)}else if("4"===r)alert("KeyPoint annotation are currently unavailable"),t="k";else if("3"===r){t="s";(new w).generate_polygon(Te,g+"s",$e);$e()}else"1"===r&&(t="f");1===re?Ie[he].push({id:g+t,global_id:"",status:"",current:"",behavior:"",posture:"",notes:"",confidence:"",dataType:"image",fileName:qe[he].name}):Ie[he].push({id:g+t,global_id:"",status:"",current:"",behavior:"",posture:"",notes:"",confidence:"",dataType:"video",fileName:"frame_"+he}),Qe(he),v(g+1),Te.fire("saveData")}else alert("Please finish your current segmentation!")},$e=function(e){He=!He};Object(n.useEffect)((function(){null!=x&&(Me=x.get_frame_data(),Ie=x.get_annotation_data(),st())}),[x]);var et=function(e){return new Promise((function(t,a){var n=new FileReader;n.onload=function(e){t(JSON.parse(e.target.result))},n.readAsText(e.target.files[0])}))},tt=function(e){"Pause"===Ye&&(Je=!0),G(!q),Ce()};!0===q?(Ye="Pause",Ge=100):(Ye="Play",Ge=0);var at=Object(n.useState)(!0),nt=Object(s.a)(at,2),ot=nt[0],it=nt[1],lt=function(e){Ce();var t=he+Se;if(t>=Ae){if(1===re)return void fe(Ae-1);je(Ae-1)}else{if(1===re)return void fe(t);je(t)}},rt=function(e){Ce();var t=he-Se;if(t<0){if(1===re)return void fe(0);je(0)}else{if(1===re)return void fe(t);je(t)}};Object(n.useEffect)((function(){1===re&&dt()}),[he]);var ct=function(e){if(!1!==$)if(!0!==He)if("2"===e.key)Be="Mode Switch: Bounding Box",K(!0),d("2");else if("4"===e.key)Be="Mode Switch: Key Point",K(!0),d("4");else if("3"===e.key)Be="Mode Switch: Segmentation",K(!0),d("3");else if("1"===e.key)Be="Mode Switch: Behavior Annotation",K(!0),d("1");else if("a"===e.key){var t="";"2"===r?t="Bounding Box":"1"===r?t="Behavior Data":"4"===r?t="Keypoint":"3"===r&&(t="Segmentation"),Be="Added Annotation - "+t,"3"!==r&&K(!0),Ze()}else"q"===e.key?rt():"w"===e.key?(dt(),tt()):"e"===e.key?(console.log(Te.toJSON()),lt()):"s"===e.key?(Be="Annotation Saved",K(!0),Me[he]=Te.toJSON()):"f"===e.key?!1===ot?(Be="Scrubbing Mode Activated",it(!0),K(!0)):(Be="Scrubbing Mode Deactivated",it(!1),K(!0)):"c"===e.key&&(Be="Copying previous frame annotation",Ie[he]=JSON.parse(JSON.stringify(Le)),Me[he]=Ve.slice(),dt(),K(!0));else alert("Please finish your current action!")};Object(n.useEffect)((function(){return document.addEventListener("keydown",ct),function(){return document.removeEventListener("keydown",ct)}}),[ct]);var st=function(){a(Math.floor(999999999999*Math.random()))},ut=function(e){console.log("Keycheck activated"),ee(void 0===e?!$:e)},dt=function(){if(1==re)return(l=new Image).onload=function(){if(Te.clear(),console.log(Me[he]),void 0!=Me[he])for(var e=0;e<Me[he].length;e++)Te.add(Me[he][e]);Ke={name:ze,duration:D,horizontal_res:l.width,vertical_res:l.height,frame_rate:_e,time:Xe};var t=new Ee.Image(l,{objectCaching:!1,scaleX:ke/l.width,scaleY:Oe/l.height});console.log("CURRFRAME: "+he),Te.setBackgroundImage(t),Te.renderAll(),be(he)},void(l.src=URL.createObjectURL(qe[he]));parseInt(JSON.parse(JSON.stringify(he)));var e=document.getElementsByTagName("video")[0],t=e.duration*_e;console.log(t),console.log(e.duration);var a=document.createElement("canvas"),n=a.getContext("2d"),o=ke,i=Oe;a.width=ke,a.height=Oe,n.drawImage(e,0,0,o,i);var l,r=a.toDataURL();(l=new Image).onload=function(){if(Te.clear(),void 0!=Me[he])for(var e=0;e<Me[he].length;e++)Te.add(Me[he][e]);var t=new Ee.Image(l,{objectCaching:!1});Te.setBackgroundImage(t),Te.renderAll(),a.remove(),be(he)},l.src=r};return o.a.createElement("div",null,o.a.createElement(ce,{disable_buttons:De,video_width:Ne,video_height:Fe,skip_value:Se,ANNOTATOR_NAME:Ue,handle_link_open:function(){window.open("https://forms.gle/CrJuYEoT39uFgnR17","_blank")},handleOldAnnotation:function(e){et(e).then((function(e){null!=e?C(new p(e,Te)):alert("Error in processing Annotation")}))},handleVideoUpload:function(e){if(1===re){qe=e.target.files,Ae=qe.length;for(var t=0;t<Ae;t++)Ie.push([]);dt(),De=!1}if("string"===typeof e)return _(e),ze=e,void(Re=!0);ze=e.target.files[0].name,_(URL.createObjectURL(e.target.files[0])),Re=!0},currentFrame:he,display_frame_num:"Frame #"+parseInt(he+1)+" / "+parseInt(Ae),skip_frame_forward:lt,skip_frame_backward:rt,handlePlaying:tt,play_button_text:Ye,addToCanvas:Ze,ANNOTATION_VIDEO_NAME:ze,frame_data:Me,change_skip_value:function(e){Se=e},change_annotator_name:function(e){Ue=e},change_annotation_type:function(e){d(e)},annotation_data:Ie,VIDEO_METADATA:Ke,scaling_factor_height:Oe,scaling_factor_width:ke,columns:A,handleSetPlaybackRate:function(e){isNaN(e)?oe(0):e>16?(alert("Max playback rate is 16!"),oe(16)):oe(e)},toggleKeyCheck:ut,setFrameRate:function(e){if((_e=parseInt(e))>120)_e=120;else if(_e<=0)_e=1;else if(0==Number.isFinite(_e))return void(_e=1);if(console.log(Number.isFinite(_e)),console.log(_e),we=Math.round(D*_e),0==Ie[0].length){Ae=D*e,console.log("Resetting frame_data and annotation_data"),Me=new Array(we),Ie=new Array(we);for(var t=0;t<we;t++)Me[t]=[],Ie[t]=[];a(Math.floor(999999999999*Math.random()))}else alert("There is data currently annotated! To change frame rate refresh the page and re-upload!")},frame_rate:_e,setDateTime:function(e){Ke={name:ze,duration:D,horizontal_res:Ne,vertical_res:Fe,frame_rate:_e,time:Xe=e},console.log(e)},fabricCanvas:Te,save_data:Qe,handle_visual_toggle:st,handleInputType:function(e){0==e|1==e?se(e):alert("ERROR VALUE SET - Please report this bug!\n")},image_frames:qe,toggle_segmentation:$e}),o.a.createElement(u.a,{onClose:function(){return K(!1)},show:z,delay:500,autohide:!0,style:{position:"absolute",top:"100",left:"100",zIndex:"100"}},o.a.createElement(u.a.Header,null,o.a.createElement("strong",{className:"mr-auto"},Be))),!0===Re&&o.a.createElement("div",{style:{display:"grid"},show:Re},o.a.createElement("div",{style:{gridColumn:1,gridRow:1,position:"relative",width:ke,height:Oe,top:0,left:0,opacity:Ge}},0==re&&o.a.createElement(c.a,{onReady:function(e){0==We&&(dt(),We=!0)},onSeek:function(e){dt(),Pe=he/(D*_e),a(Math.floor(999999999999*Math.random()))},ref:function(e){if(null!=e&&null!=e.player&&null!=e.player.player&&null!=e.player.player){Ne=e.player.player.player.videoWidth,Fe=e.player.player.player.videoHeight;var t=e.player.player.player.duration;Ke={name:ze,duration:t,horizontal_res:Ne,vertical_res:Fe,frame_rate:_e,time:Xe}}M(e)},onDuration:function(e){if(!0===Re&&null!=F){if(we=Math.round(e*_e),0==Ie[0].length){console.log("Resetting frame_data and annotation_data"),Me=new Array(we),Ie=new Array(we);for(var t=0;t<we;t++)Me[t]=[],Ie[t]=[]}De=!1}Ae=parseInt(e)*_e,P(parseInt(e))},url:E,width:"100%",height:"100%",playing:q,controls:!1,style:{position:"absolute",float:"left",top:0,left:0},volume:0,muted:!0,pip:!1,playbackRate:ne,id:"myvideo"})),o.a.createElement("div",{style:{gridColumn:1,gridRow:1,position:"relative",top:0,left:0,opacity:100-Ge}},o.a.createElement(de,{fabricCanvas:Te,currentFrame:he,save_data:Qe,scaling_factor_height:Oe,scaling_factor_width:ke})),o.a.createElement("div",{style:{gridColumn:1,gridRow:2,position:"relative",width:ke,top:0,left:0}},o.a.createElement("input",{style:{width:ke},type:"range",min:0,max:.999999,step:"any",value:Pe,onChange:function(e){Pe=parseFloat(e.target.value),F.seekTo(Pe)},onMouseDown:function(e){X(!0),Pe=parseFloat(e.target.value)},onMouseUp:function(e){X(!1),Pe=parseFloat(e.target.value)}})),o.a.createElement("div",{style:{gridColumn:2,gridRow:1,position:"relative",width:.4*ke,height:Oe,top:0,left:0}},o.a.createElement(ye,{annotation_data:Ie,currentFrame:ve,toggleKeyCheck:ut,columns:A,remove_table_index:function(e){if(void 0===e){for(var t=[],n=0;n<Ie[he].length;n++)t.push(Ie[he][n].id);t.map((function(e){return xe(e)}))}else xe(e);a(Math.floor(999999999999*Math.random()))},handleSetCurrentFrame:je}))))}var $e=[{value:"Other",label:"Other"},{value:"Lying",label:"Lying"},{value:"Standing",label:"Standing"},{value:"Sitting",label:"Sitting"},{value:"Kneeling",label:"Kneeling"},{value:"Scar",label:"Scar"},{value:"Facial",label:"Facial"},{value:"Skin",label:"Skin"},{value:"Walking",label:"Walking"},{value:"Running",label:"Running"},{value:"Transitioning",label:"Transitioning"},{value:"Exploring",label:"Exploring"},{value:"Selfplay",label:"Selfplay"},{value:"Aggression",label:"Aggression"},{value:"Defecation",label:"Defecation"},{value:"Urination",label:"Urination"},{value:"Drinking",label:"Drinking"},{value:"Feeding",label:"Feeding"}];"undefined"===typeof Storage&&alert("Your browser does not support local storage. \nSome autosaving features of the app will not work as intended.\nPlease see the documentation to find supported browsers and their versions");var et=a(134).fabric,tt=-1,at=1920,nt=1;console.log(window.screen.width),console.log(window.screen.height);var ot=window.screen.width,it=window.screen.height;it>=1440?at=1920:it>=1080?at=1280:it>=1024?at=1152:it>=768&&(at=1024);var lt=new et.Canvas("c",{uniScaleTransform:!0}),rt=0,ct=0,st=[[]],ut=[[]],dt=!1,mt=!0,ht=0,ft=0,gt="",pt=[],vt=[],bt="",yt="";function Et(e){st[e]=lt.toJSON(),console.log("SAVED")}var _t=function(){var e=[{dataField:"id",text:"ID",headerStyle:function(){return{width:"40px",left:0}}},{dataField:"global_id",text:"Glo",headerStyle:function(){return{width:"50px",left:0}},editCellStyle:function(e,t,a,n){return{backgroundColor:e>2101?"#00BFFF":"#00FFFF"}}},{dataField:"status",text:"Status",editor:{type:k.Type.SELECT,options:x}},{dataField:"current",text:"Curr",editor:{type:k.Type.CHECKBOX,value:"Start:Stop"},headerStyle:function(){return{width:"60px",left:0}}},{dataField:"behavior",text:"Behavior",editor:{type:k.Type.SELECT,options:$e}},{dataField:"posture",text:"Posture",editor:{type:k.Type.SELECT,options:j}},{dataField:"remove",text:"Del",editable:!1,headerStyle:function(){return{width:"50px",left:0}},formatter:function(e,a){return o.a.createElement("button",{className:"btn btn-danger btn-xs",onClick:function(){return t(a.id)},label:"Del"})}}],t=function(e){for(var t=0,a=0;a<ut[ht].length;a++)if(ut[ht][a].id==e){t=a;break}if("f"!==e.substring(e.length-1,e.length))for(a=0;a<lt.getObjects().length;a++)if(lt.getObjects()[a]._objects[1].text===e){lt.remove(lt.getObjects()[a]),lt.fire("saveData");break}console.log(ut[ht]),ut[ht].splice(t,1),console.log(ut[ht]),Et(ht),r(Math.floor(999999999999*Math.random()))},a=Object(n.useState)(0),i=Object(s.a)(a,2),l=i[0],r=i[1];console.log(l);var d=function(){0!=ut[ht].length&&(console.log(0===ut[ht].length),console.log("saved annotation"),pt=ut[ht],vt=st[ht])},m=Object(n.useState)("1"),h=Object(s.a)(m,2),g=h[0],v=h[1],b=Object(n.useState)(0),y=Object(s.a)(b,2),E=y[0],_=y[1],w=function(){var e="#"+((1<<24)*Math.random()|0).toString(16);if(null==ut[ht]&&(ut[ht]=[]),"2"===g){ut[ht].push({id:E+"b",global_id:null,status:"",current:"Start",behavior:"None"});var t=new f(lt.height/2,lt.width/2,50,50,e,E+"b","None").generate_no_behavior(lt);lt.add(t)}else"3"===g?alert("KeyPoint annotation are currently unavailable"):"4"===g?(alert("Segmentation annotation is currently under development"),ut[ht].push({id:E+"s",global_id:null,status:"None",current:"Start",behavior:"None"})):"1"===g&&ut[ht].push({id:E+"f",global_id:null,status:"",current:"Start",behavior:"None"});Et(ht),_(E+1),lt.fire("saveData")},S=Object(n.useState)(null),C=Object(s.a)(S,2),A=C[0],I=C[1],D=Object(n.useState)(null),P=Object(s.a)(D,2),L=P[0],V=P[1],z=Object(n.useState)(null),J=Object(s.a)(z,2),X=J[0],H=J[1];Object(n.useEffect)((function(){null!=X&&(alert("Annotation upload processed.\nAny existing annotations will be deleted and replaced with uploaded ones."),console.log(X),console.log(X.get_frame_data()),st=X.get_frame_data(),ut=X.get_annotation_data(),Ve())}),X);var W=function(e){return new Promise((function(t,a){var n=new FileReader;n.onload=function(e){t(JSON.parse(e.target.result))},n.readAsText(e.target.files[0])}))},q=Object(n.useState)(!1),G=Object(s.a)(q,2),Q=G[0],Z=G[1],$=function(e){Z(!Q)},ee="ERROR";ee=!0===Q?"Pause":"Play";var te=Object(n.useState)(!1),ae=Object(s.a)(te,2),ne=(ae[0],ae[1]),oe=Object(n.useState)(null),ie=Object(s.a)(oe,2),le=ie[0],re=ie[1],ce=function(e){if(null!=e&&null!=e.player&&null!=e.player.player&&null!=e.player.player){rt=e.player.player.player.videoWidth,ct=e.player.player.player.videoHeight;e.player.player.player.duration}re(e)},se=Object(n.useState)(0),ue=Object(s.a)(se,2),de=ue[0],me=ue[1],fe=function(e){if(!0===dt&&null!=le){console.log("Initializing..."),tt=Math.round(15*e),st=new Array(tt),ut=new Array(tt);for(var t=0;t<tt;t++)st[t]=[],ut[t]=[];dt=!1,mt=!1}me(parseInt(e)),console.log(e)},pe=function(e){Et(ht);var t=15*de;ht=e.played/t,ht=Math.round(e.played*t),Ve()},ve=Object(n.useState)(!0),be=Object(s.a)(ve,2),ye=be[0],Ee=be[1],_e=function(e){d(),!1===ye&&0==ut[ht+nt].length&&(ut[ht+nt]=JSON.parse(JSON.stringify(ut[ht])),st[ht+nt]=st[ht],console.log("Carryover annotation"));var t=15*de;console.log(le.getCurrentTime()/de*t/t+nt/t),le.seekTo(le.getCurrentTime()/de*t/t+nt/t)},we=function(e){d();var t=15*de;le.seekTo(le.getCurrentTime()/de*t/t-nt/t)},ke=function(){var e=Object(Y.a)(K.a.mark((function e(){var t,a,n,o,i;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="generated_annotations",""!==yt&&""!==bt&&(t=yt.split(".").slice(0,-1).join(".")+"_"+bt),a=JSON.stringify({annotations:st,behavior_data:ut}),n=new Blob([a],{type:"application/json"}),e.next=6,URL.createObjectURL(n);case 6:o=e.sent,(i=document.createElement("a")).href=o,i.download=t+".json",document.body.appendChild(i),i.click(),document.body.removeChild(i);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Oe=Object(n.useState)(!1),Se=Object(s.a)(Oe,2),je=Se[0],xe=Se[1],Ce=function(){return xe(!1)},Te=Object(n.useState)(!1),Ae=Object(s.a)(Te,2),Ne=Ae[0],Fe=Ae[1],Me=Object(n.useState)(!0),Ie=Object(s.a)(Me,2),Re=Ie[0],De=Ie[1],Pe=function(e){if(0!=Re)if("2"===e.key)gt="Mode Switch: Bounding Box",Fe(!0),v("2");else if("3"===e.key)gt="Mode Switch: Key Point",Fe(!0),v("3");else if("4"===e.key)gt="Mode Switch: Segmentation",Fe(!0),v("4");else if("1"===e.key)gt="Mode Switch: Behavior Annotation",Fe(!0),v("1");else if("a"===e.key){var t="";"2"===g?t="Bounding Box":"1"===g?t="Behavior Data":"3"===g?t="Keypoint":"4"===g&&(t="Segmentation"),gt="Added Annotation - "+t,Fe(!0),w()}else"r"===e.key||("q"===e.key?we():"w"===e.key?$():"e"===e.key?_e():"s"===e.key?(gt="Annotation Saved",Fe(!0),st[ht]=lt.toJSON()):"f"===e.key?!1===ye?(gt="Scrubbing Mode Activated",Ee(!0),Fe(!0)):(gt="Scrubbing Mode Deactivated",Ee(!1),Fe(!0)):"c"===e.key&&(gt="Copying previous frame annotation",ut[ht]=JSON.parse(JSON.stringify(pt)),st[ht]=JSON.parse(JSON.stringify(vt)),Fe(!0)))},Be=Object(n.useState)(!1),Le=Object(s.a)(Be,2);Le[0],Le[1],Object(n.useEffect)((function(){return document.addEventListener("keydown",Pe),function(){return document.removeEventListener("keydown",Pe)}}),[Pe]),lt.loadFromJSON(st[ht],(function(){lt.renderAll()}));var Ve=function(){r(l+1)};return o.a.createElement("div",null,o.a.createElement(N.a,{bg:"dark",variant:"dark",className:"bg-5"},o.a.createElement(N.a.Brand,{href:"#home"},"AVAT"),o.a.createElement(F.a,{className:"mr-auto"},o.a.createElement(F.a.Link,{onClick:function(){return xe(!0)}},"Instructions"),o.a.createElement(M.a,{disabled:mt,title:"Export",id:"basic-nav-dropdown"},o.a.createElement(M.a.Item,{onClick:ke},"JSON"),o.a.createElement(M.a.Divider,null),o.a.createElement(M.a.Item,null,"CSV")),o.a.createElement(M.a,{title:"Settings",id:"basic-nav-dropdown"},o.a.createElement(M.a.Divider,null),"Frame Rate: ",o.a.createElement("input",{type:"number",defaultValue:"15"}),o.a.createElement(M.a.Divider,null),"Horizontal Res: ",o.a.createElement("input",{type:"number",defaultValue:rt}),o.a.createElement(M.a.Divider,null),"Vertical Res: ",o.a.createElement("input",{type:"number",defaultValue:ct}),o.a.createElement(M.a.Divider,null),"Skip Value: ",o.a.createElement("input",{type:"number",defaultValue:"1",onChange:function(e){nt=parseInt(e.target.value)}}),o.a.createElement(M.a.Divider,null),"Annotator Name: ",o.a.createElement("input",{type:"text",defaultValue:"",onChange:function(e){bt=e.target.value}})),o.a.createElement(F.a.Link,{onClick:function(){window.open("https://forms.gle/CrJuYEoT39uFgnR17","_blank")}},"Report")),o.a.createElement("div",null,o.a.createElement(R.a,{style:{float:"left",width:80}},o.a.createElement(R.a.File,{disabled:mt,id:"file",label:"Annotation Upload",custom:!0,type:"file",onChange:function(e){W(e).then((function(e){null!=e?H(new p(e)):console.log("ERROR in upload old_annotation")}))}})),o.a.createElement(R.a,{style:{float:"left",width:80}},o.a.createElement(R.a.File,{id:"file",label:"Video Upload",accept:".mp4",custom:!0,type:"file",onChange:function(e){I(URL.createObjectURL(e.target.files[0])),console.log(e.target.files[0]),yt=e.target.files[0].name,dt=!0}})),o.a.createElement(R.a,{style:{float:"left",width:80}},o.a.createElement(R.a.File,{id:"file",label:"Video Upload",accept:".mp4",custom:!0,type:"file",onChange:function(e){V(URL.createObjectURL(e.target.files[0]))}})),o.a.createElement(T.a,{variant:"secondary",disabled:!0},"Frame # ",parseInt(ht)+" / "+parseInt(15*de))," ",o.a.createElement(T.a,{variant:"primary",disabled:mt,onClick:we},"Prev")," ",o.a.createElement(T.a,{variant:"primary",disabled:mt,onClick:$},ee)," ",o.a.createElement(T.a,{variant:"primary",disabled:mt,onClick:_e},"Next")," ",o.a.createElement(T.a,{variant:"success",disabled:mt,onClick:w,style:{position:"relative"}},"Add")," ")),o.a.createElement(u.a,{onClose:function(){return Fe(!1)},show:Ne,delay:500,autohide:!0,style:{position:"absolute",top:0,left:"40%",zIndex:100}},o.a.createElement(u.a.Header,null,o.a.createElement("strong",{className:"mr-auto"},gt))),o.a.createElement(B.a,{show:je,onHide:Ce,size:"lg"},o.a.createElement(B.a.Header,{closeButton:!0},o.a.createElement(B.a.Title,null,"Instructions")),o.a.createElement(B.a.Body,null,o.a.createElement(U,null)),o.a.createElement(B.a.Footer,null,o.a.createElement(T.a,{variant:"secondary",onClick:Ce},"Close"))),o.a.createElement("div",{style:{display:"grid"}},o.a.createElement("div",{style:{gridColumn:1,gridRow:1,position:"relative",height:.4*it}},o.a.createElement(c.a,{onProgress:pe,ref:ce,onDuration:fe,url:A,width:"100%",height:"99.999%",playing:Q,controls:!1,volume:0,muted:!0,pip:!1})),o.a.createElement("div",{style:{gridColumn:1,gridRow:2,position:"relative",height:.4*it}},o.a.createElement(c.a,{onProgress:pe,ref:ce,onDuration:fe,url:L,width:"100%",height:"99.999%",playing:Q,controls:!1,volume:0,muted:!0,pip:!1})),o.a.createElement("div",{style:{gridColumn:1,gridRow:3,position:"relative",top:0,left:0}},o.a.createElement("input",{style:{width:.5*at},type:"range",min:0,max:.999999,step:"any",value:ft,onMouseDown:function(e){ne(!0)},onChange:function(e){ft=parseFloat(e.target.value)},onMouseUp:function(e){ne(!1),le.seekTo(parseFloat(e.target.value))}})),o.a.createElement("div",{style:{gridColumn:2,gridRow:1,position:"relative",width:.4*ot,top:0,left:0}},o.a.createElement("div",null,o.a.createElement(he.a,{keyField:"id",data:ut[ht],columns:e,table:!0,noDataIndication:function(){return o.a.createElement("div",null,"No recorded annotations or behaviors for this frame",o.a.createElement("br",null),"Please add an annotation or behavior tag to start.")},cellEdit:O()({mode:"click",blurToSave:!0,afterSaveCell:function(e,t,a,n){ut[ht][a.id]=a,De(!0)},onStartEdit:function(e,t,a,n){De(!1)}}),pagination:ge()()})))))},wt=a(635),kt=a(636),Ot=a(455);var St=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],i=t[1],l=function(){return i(!1)},r=Object(n.useState)(!1),c=Object(s.a)(r,2),u=c[0],d=c[1],m=Object(n.useState)(!1),h=Object(s.a)(m,2),f=h[0],g=h[1];return u?o.a.createElement(Ze,null):f?o.a.createElement(_t,null):o.a.createElement("div",null,o.a.createElement(B.a,{show:a,onHide:l,size:"lg"},o.a.createElement(B.a.Header,{closeButton:!0},o.a.createElement(B.a.Title,null,"Instructions")),o.a.createElement(B.a.Body,null,o.a.createElement(U,null)),o.a.createElement(B.a.Footer,null,o.a.createElement(T.a,{variant:"secondary",onClick:l},"Close"))),o.a.createElement("main",null,o.a.createElement(wt.a,{className:"text-center"},o.a.createElement(kt.a,null,o.a.createElement("h1",{className:"jumbotron-heading"},"AVAT"),o.a.createElement("p",{className:"lead text-muted"}," Analysis tool to record data for livestock behavior and computer vision applications. "),o.a.createElement("p",null,o.a.createElement(T.a,{onClick:function(e){d(!u)},variant:"success",className:"mx-1 my-2"},"Video Upload"),o.a.createElement(T.a,{onClick:function(e){g(!f)},variant:"success"},"Multiview")))),o.a.createElement(ae.a,{controls:!1,fade:!0,style:{width:"70%","margin-left":"auto","margin-right":"auto"}},Ot.map((function(e,t){return o.a.createElement(ae.a.Item,{interval:e.slide_time},o.a.createElement(ne.a,{className:"mb-5 box-shadow",top:!0,width:"100%"},o.a.createElement(ne.a.Img,{width:"60%",variant:"top",src:"/AVAT"+e.src}),o.a.createElement(ne.a.Body,{style:{"text-align":"center"}},o.a.createElement(ne.a.Title,null,e.altText),o.a.createElement(ne.a.Text,null,e.description))))})))))};var jt=function(){return o.a.createElement("div",null,o.a.createElement(St,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(jt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[461,1,2]]]);
//# sourceMappingURL=main.2bb46140.chunk.js.map
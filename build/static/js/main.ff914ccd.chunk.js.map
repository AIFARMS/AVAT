{"version":3,"sources":["backend_processing/annotation.js","ui_elements/Components/change_table.js","backend_processing/bounding_box.js","backend_processing/frame_bounding_box.js","ui_elements/Pages/main_upload.js","ui_elements/Pages/main_youtube.js","ui_elements/Pages/selection_screen.js","App.js","serviceWorker.js","index.js"],"names":["Annotation","annotation_json","this","objects","console","log","id","frame_num","i","objects_frame","length","curr_obj","curr_obj_frames","j","push","columns","dataField","text","ChangeTable","input","data","ret","elem_id","toString","behavior","is_hidden","x_cor","y_cor","json_to_table","style","width","condensed","keyField","fabric","require","BoundingBox","top","left","height","color","Rect","hasRotatingPoint","uniScaleTransform","fill","borderColor","opacity","Text","fontSize","Group","rectangle","id_text","FrameBoundingBox","frame_data","canvas_width","canvas_height","windowWidth","windowHeight","bounding_boxes","Math","random","curr_box","getTop","getLeft","getWidth","getHeight","generate_no_behavior","floor","Nuclear","createReactClass","reactor","Reactor","debug","keys","obj","key","Object","Array","isArray","Error","hasOwnProperty","keyMirror","fabricData","activeObject","fabricCanvas","Canvas","fabricStore","Store","getInitialState","toImmutable","initialize","on","saveFabricData","saveActiveObject","state","set","value","registerStores","Fabric","componentDidMount","el","ReactDOM","findDOMNode","window","innerHeight","innerWidth","backgroundColor","global_currFrame","toJSON","dispatch","toObject","getActiveObject","renderAll","render","NewObjects","mixins","ReactMixin","getDataBindings","get","size","float","Button","onClick","addGroup","position","remove","addSquare","bounding_box","originX","originY","drop","add","setActiveObject","fire","new_bbox","fabricObject","upload","MainUpload","useState","videoFilePath","setVideoFileURL","oldAnnotation","setOldAnnotation","useEffect","getAllObjectByFrame","downloadOldAnnotation","file","Promise","resolve","reject","reader","FileReader","onload","e","JSON","parse","target","result","readAsText","files","playing","setPlaying","play_button_text","setSeeking","sliderPercent","setSliderPercent","player","setPlayer","duration","setDuration","currentFrame","setCurrentFrame","downloadFile","a","fileName","json","stringify","blob","Blob","type","URL","createObjectURL","href","link","document","createElement","download","body","appendChild","click","removeChild","show","setShow","handleClose","Navbar","bg","variant","className","Brand","Nav","Link","NavDropdown","title","Item","Divider","disabled","parseInt","Form","File","label","custom","onChange","event","then","total_frames","seekTo","getCurrentTime","Modal","onHide","Header","closeButton","Title","Body","Footer","display","onProgress","val","round","clear","bbox","generate_frame","ref","onDuration","url","controls","volume","muted","pip","min","max","step","onMouseDown","parseFloat","onMouseUp","MainYoutube","class","SelectionScreen","youtube","Jumbotron","fluid","Container","src","process","alt","to","path","component","App","exact","Boolean","location","hostname","match","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.ff914ccd.chunk.js","sourcesContent":["export default class Annotation {\n    constructor(annotation_json){\n        this.objects = annotation_json['objects']\n        console.log(this.objects)\n    }\n\n    getObjects() {\n        return this.objects\n    }\n\n    getObjectById(id) {\n        return this.objects[id]\n    }\n\n    getObjectByIdFrame(id, frame_num){\n        return this.objects[id][frame_num]\n    }\n\n    getAllObjectByFrame(frame_num){\n        var i;\n        var objects_frame = []\n        for (i = 0; i < this.objects.length; i++){\n            var curr_obj = this.objects[i]\n            if(curr_obj['frames'][curr_obj['frames'].length-1]['frameNumber'] < frame_num){\n                continue;\n            }\n            var curr_obj_frames = curr_obj['frames'];\n            for (var j = 0; j < curr_obj_frames.length; j++){\n                if(curr_obj_frames[j]['frameNumber'] === frame_num){\n                    objects_frame.push(curr_obj_frames[j]);\n                    break;\n                }\n            }\n        }\n        console.log(objects_frame)\n        return objects_frame;\n    }\n\n}\n\n","import React, { useState } from \"react\"; \nimport ReactDOM from 'react-dom'\nimport ReactPlayer from 'react-player'\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nimport Table from 'react-bootstrap/Table'\n\nimport BootstrapTable from 'react-bootstrap-table-next';\nimport 'react-bootstrap-table-next/dist/react-bootstrap-table2.min.css';\n\nconst columns = [{\n    dataField: \"id\",\n    text: \"ID\"\n},{\n    dataField: \"behavior\",\n    text: \"Be\"\n},{\n    dataField: \"is_hidden\",\n    text: \"Hid\"\n},{\n    dataField: \"x_cor\",\n    text: \"X\"\n},{\n    dataField: \"y_cor\",\n    text: \"Y\"\n}]\n\nfunction json_to_table(data){\n    var ret = []\n    if(data == null){\n        return []\n    }\n    for(var i = 0; i < data['objects'].length; i++){\n        const elem_id = i + 1\n        var curr_obj = data['objects'][i]\n        console.log(curr_obj['left'])\n        ret.push({id: elem_id.toString(), behavior: \"None\", is_hidden: \"False\", x_cor: curr_obj['left'], y_cor: curr_obj['top']})        \n    }\n    return ret\n}\n\nfunction ChangeTable(input){\n    //console.log(input.data)\n    const data = json_to_table(input.data)\n    return (\n        <div style={{width: \"15%\"}}>\n            <BootstrapTable condensed={true} keyField='id' data={data} columns={ columns } />\n        </div>\n    )\n}\n\nexport default ChangeTable;","const fabric = require(\"fabric\").fabric;\n\nclass BoundingBox {\n    constructor(top, left, width, height, color, id, behavior) {\n        this.top = top;\n        this.left = left;\n        this.id = id;\n        this.behavior = behavior;\n        this.color = color;\n        this.width = width;\n        this.height = height;\n    }\n\n    rectangle(){\n        return new fabric.Rect({\n            hasRotatingPoint: false,\n            uniScaleTransform: true,\n            height: this.height,\n            width: this.width,\n            fill: this.color,\n            borderColor: '#000',\n            opacity: '.4',\n            top: this.top,\n            left: this.left,\n        });\n    } \n\n    //TODO Add text scaling\n    id_text(){\n        return new fabric.Text(this.id.toString(), {\n            fontSize: 10,\n            top: this.top,\n            left: this.left,\n            uniScaleTransform: false,\n          });\n    }\n\n    behavior(){\n\n    }\n\n    generate_no_behavior(){\n        return new fabric.Group([this.rectangle() , this.id_text() ], {\n            left: this.left,\n            top: this.top,\n          });\n    }\n\n    generate_with_behavior(){\n\n    }\n}\n\n\nfunction genetate_bounding_box(){\n\n}\n\nexport {BoundingBox, genetate_bounding_box}","import { BoundingBox } from \"./bounding_box\"\n\nclass FrameBoundingBox {\n    constructor(frame_data, canvas_width, canvas_height){\n        this.frame_data = frame_data;\n        this.canvas_width = canvas_width;\n        this.canvas_height = canvas_height;\n        this.windowWidth = 3840;\n        this.windowHeight = 2160;\n    }\n\n    generate_frame(){\n        var bounding_boxes = []\n        for (var i = 0; i < this.frame_data.length; i++){\n            var color = \"#\" + ((1<<24)*Math.random() | 0).toString(16)\n            console.log(this.frame_data[i])\n            var curr_box = new BoundingBox(this.getTop(this.frame_data[i]), this.getLeft(this.frame_data[i]), this.getWidth(this.frame_data[i]), this.getHeight(this.frame_data[i]), color, i, \"TEST\").generate_no_behavior()\n            bounding_boxes.push(curr_box);\n        }\n        return bounding_boxes\n    }\n\n    getID(data){\n        return data['id']\n    }\n\n    getWidth(data){\n        return Math.floor((data['bbox']['width']/this.windowWidth)*this.canvas_width)\n    }\n\n    getHeight(data){\n        return Math.floor((data['bbox']['height']/this.windowHeight)*this.canvas_height)\n    }\n\n    getTop(data){\n        return Math.floor((data['bbox']['y']/this.windowHeight)*this.canvas_height)\n    }\n\n    getLeft(data){\n        return Math.floor((data['bbox']['x']/this.windowWidth)*this.canvas_width)\n    }\n\n\n}\n\nexport {FrameBoundingBox}","import React, { useEffect, useState } from \"react\"; \nimport ReactDOM from 'react-dom'\nimport ReactPlayer from 'react-player'\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nimport Button from 'react-bootstrap/Button'\nimport Navbar from 'react-bootstrap/Navbar'\nimport Nav from 'react-bootstrap/Nav'\nimport Modal from 'react-bootstrap/Modal'\nimport Form from 'react-bootstrap/Form'\nimport Table from 'react-bootstrap/Table'\n\n//import Custon_Nav_Bar from '../backend_processing/nav_bar'\n\nimport Annotation from '../../backend_processing/annotation'\nimport ChangeTable from '../Components/change_table'\nimport { NavDropdown } from \"react-bootstrap\";\n\nimport { BoundingBox } from '../../backend_processing/bounding_box'\nimport { wait } from \"@testing-library/dom\";\nimport { FrameBoundingBox } from '../../backend_processing/frame_bounding_box'\n\nconst fabric = require(\"fabric\").fabric;\nconst Nuclear = require(\"nuclear-js\");\nconst createReactClass = require('create-react-class');\n\n\n//TODO ADD DYNAMIC SOLUTION \nvar frame_rate = 15;\nvar scaling_factor = .8\n\nvar keyMirror = function(obj) {\n  var ret = {};\n  var key;\n  if (!(obj instanceof Object && !Array.isArray(obj))) {\n    throw new Error('keyMirror(...): Argument must be an object.');\n  }\n  for (key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      ret[key] = key;\n    }\n  }\n  return ret;\n};\n\nvar reactor = new Nuclear.Reactor({ debug: true });\nvar keys = keyMirror({ fabricData: null, activeObject: null });\n\n// globally accessable fabricCanvas instance\nvar fabricCanvas = new fabric.Canvas();\n\n// A place to put fabric data\nvar fabricStore = Nuclear.Store({\n  getInitialState() {\n    return Nuclear.toImmutable({\n    \tfabricData: {\n      \tobjects: [],\n      },\n      activeObject: false,\n    })\n  },\n  initialize() {\n    this.on(keys.fabricData, this.saveFabricData)\n    this.on(keys.activeObject, this.saveActiveObject)\n  },\n  saveFabricData(state, fabricData) {\n\t\treturn state.set('fabricData', Nuclear.toImmutable(fabricData));\n\t},\n  saveActiveObject(state, value) {\n\t\treturn state.set('activeObject',value);\n\t}\n});\n\nreactor.registerStores({\n  'fabricStore': fabricStore,\n});\n\nvar Fabric = createReactClass({\n\tcomponentDidMount() {\n  \tvar el = ReactDOM.findDOMNode(this);\n    \n    // Here we have the canvas so we can initialize fabric\n    fabricCanvas.initialize(el, {\n    \theight: window.innerHeight* scaling_factor,\n      width: window.innerWidth * scaling_factor,\n      backgroundColor : null,\n    });\n    \n    // on mouse up lets save some state\n    fabricCanvas.on('mouse:up', () => {\n      frame_data[global_currFrame] = fabricCanvas.toJSON()\n      reactor.dispatch(keys.fabricData, fabricCanvas.toObject());\n      reactor.dispatch(keys.activeObject, !!fabricCanvas.getActiveObject());\n    });\n    \n    // an event we will fire when we want to save state\n    fabricCanvas.on('saveData', () => {\n    \treactor.dispatch(keys.fabricData, fabricCanvas.toObject());\n      reactor.dispatch(keys.activeObject, !!fabricCanvas.getActiveObject());\n      fabricCanvas.renderAll(); // programatic changes we make will not trigger a render in fabric\n    });\n  }, \n  render() {\n    return <canvas></canvas>\n  }\n});\n\n\n\nvar NewObjects = createReactClass({\n\tmixins: [reactor.ReactMixin],\n  getDataBindings() {\n  \treturn {\n    \tfabricData: ['fabricStore', 'fabricData'],\n    \tactiveObject: ['fabricStore', 'activeObject'],\n    };\n  },\n  render: function() {\n  \tif (this.state.fabricData.get('objects').size === 0) {\n    \t// no object is on the canvas so show interface to add one\n      //<input type=\"file\" id=\"video_submit\" value=\"none\"/> //onClick={this.addKanalImg}/>\n      return (\n      <div style={{float: \"right\"}}>\n        <Button onClick={this.addGroup} style={{position:\"relative\"}}>Add Square</Button>{' '}\n        <Button onClick={this.remove} style={{position:\"relative\"}}>Remove</Button>{' '}\n      </div>\n      );\n    } else {\n    \t// an object is selected so lets interact with it\n    \treturn (\n        <div style={{float: \"right\"}}>\n          <Button onClick={this.addGroup} style={{position:\"relative\"}}>Add Square</Button>{' '}\n          <Button onClick={this.remove} style={{position:\"relative\"}}>Remove</Button>{' '}\n        </div>\n      );\n    }//else {\n    \t// if there is an object but it is not selected then remove the buttons\n    \t//return null;\n    //}\n  },\n  addSquare() {\n    var color = \"#\" + ((1<<24)*Math.random() | 0).toString(16)\n    var bounding_box = new fabric.Rect({\n      hasRotatingPoint: false,\n      uniScaleTransform: true,\n    \theight: 50,\n    \twidth: 50,\n      originX: 'center',\n      originY: 'center',\n      fill: color,\n      borderColor: '#000',\n      opacity: '.4',\n      top: fabricCanvas.height / 2,\n      left: fabricCanvas.width / 2,\n    }, function(drop){\n        console.log(drop)\n    })\n  \tfabricCanvas.add(bounding_box);\n    fabricCanvas.setActiveObject(bounding_box);\n    fabricCanvas.fire('saveData');\n  },\n  addGroup(){\n    var color = \"#\" + ((1<<24)*Math.random() | 0).toString(16)\n    var new_bbox = new BoundingBox(fabricCanvas.height/2, fabricCanvas.width/2, 50, 50, color, 1, \"id: 1\").generate_no_behavior()\n    fabricCanvas.add(new_bbox);\n    fabricCanvas.setActiveObject(new_bbox);\n    fabricCanvas.fire('saveData');\n  },\n  remove() {\n    fabricCanvas.remove(fabricCanvas.getActiveObject());\n    fabricCanvas.fire('saveData');\n  }\n});\n\nvar ActiveObject = createReactClass({\n\tmixins: [reactor.ReactMixin],\n  getDataBindings() {\n  \treturn {\n    \tfabricObject: ['fabricStore', 'fabricData', 'objects', 0],\n      activeObject: ['fabricStore', 'activeObject']\n    };\n  },\n  render: function() {\n    //return null;\n    console.log(this.state.activeObject)\n  \tif (this.state.fabricObject) {\n    \t// if an object exists in state we can acess the data from any where in the app\n    \tvar fill = this.state.fabricObject.get('fill');\n      console.log((fabricCanvas.getActiveObject()))\n      return (<div>\n        <div><b>Active Object</b></div>\n        <div>fill: <span style={{ color: fill}}>{this.state.fabricObject.get('fill')}</span></div>\n        <div>top: {this.state.fabricObject.get('top')}</div>\n        <div>left: {this.state.fabricObject.get('left')}</div>\n        <div>angle: {this.state.fabricObject.get('angle')}</div>\n        <div>scaleX: {this.state.fabricObject.get('scaleX')}</div>\n        <div>scaleY: {this.state.fabricObject.get('scaleY')}</div>\n      </div>);\n    } else {\n      console.log(fabricCanvas.getActiveObject())\n    \treturn null;\n    }\n  },\n});\n\nfunction draw_annotation(x, y, width, height){\n\n}\n\nfunction parse_file(file){\n  \n}\n\nvar frame_data = [];\nvar upload = false;\nvar global_currFrame = 0;\n\n//Current frame counter\nfunction MainUpload() {\n\n\n\n  const [videoFilePath, setVideoFileURL] = useState(null);\n  const handleVideoUpload = (event) => {\n    //console.log(oldAnnotation)\n    setVideoFileURL(URL.createObjectURL(event.target.files[0]));\n    upload = true;\n  };\n\n  //Code for dual video upload option. Currently disabled\n  const [videoFilePath1, setVideoFileURL1] = useState(null);\n  const handleVideoUpload1 = (event) => {\n    setVideoFileURL1(URL.createObjectURL(event.target.files[0]));\n  };\n  \n  //ASYNC Function  - To note that the data that comes out of this will be a bit delayed and this could cause some issues.\n  const [oldAnnotation, setOldAnnotation] = useState(null)\n  const handleOldAnnotation = (event) => {\n      var promise = downloadOldAnnotation(event)\n      promise.then(function (result) {\n        if(result != null){\n          setOldAnnotation(new Annotation(result));\n        }else{\n          console.log(\"ERROR in upload old_annotation\")\n        }\n      })\n  }\n\n  useEffect(() => {\n    //TODO Find a more elegant solution. This is a temporay patch work.\n    if(oldAnnotation == null){\n      return;\n    }\n    console.log(oldAnnotation)\n    console.log(oldAnnotation.getAllObjectByFrame(2));\n  }, oldAnnotation);\n\n  const downloadOldAnnotation = (file) => {\n    return new Promise((resolve, reject) => {\n      var reader = new FileReader();\n      reader.onload = function(e) {\n         resolve((JSON.parse(e.target.result)));\n      }\n      reader.readAsText(file.target.files[0])\n    })\n  }\n  \n\n  const [playing, setPlaying] = useState(false);\n  const handlePlaying = (event) => {\n    setPlaying(!playing)\n  }\n\n  var play_button_text = \"ERROR\"\n  if(playing === true){\n    play_button_text = \"Pause\"\n  }else{\n    play_button_text = \"Play\"\n  }\n\n  const [seeking, setSeeking] = useState(false)\n  const [sliderPercent, setSliderPercent] = useState(0)\n\n  const handleSeekChange = e => {\n    setSliderPercent(parseFloat(e.target.value))\n  }\n\n  const handleSeekMouseDown = e => {\n    setSeeking(true)\n  }\n\n  const handleSeekMouseUp = e => {\n    setSeeking(false)\n    player.seekTo(parseFloat(e.target.value))\n  }\n\n  const [player, setPlayer] = useState(null)\n  const handleSetPlayer = val => {\n    setPlayer(val)\n    if(upload === true && player != null){      \n      console.log(\"RESET VALUES\")\n      frame_data = new Array(7200)\n      upload = false;\n    }\n  }\n\n  const [duration, setDuration] = useState(0);\n  const handleSetDuration = val => {\n    setDuration(parseInt(val))\n    console.log(val)\n  }\n\n  var tot = 0\n\n  const [currentFrame, setCurrentFrame] = useState(0)\n  const handleSetCurrentFrame = val => {\n    console.log(val)\n    var total_frames = duration * frame_rate\n    tot = total_frames\n    setSliderPercent(currentFrame/total_frames)\n    setCurrentFrame(Math.round(val['played']*total_frames))\n    global_currFrame = currentFrame\n\n    if(oldAnnotation != null){ \n      fabricCanvas.clear();\n      var bbox = new FrameBoundingBox(oldAnnotation.getAllObjectByFrame(currentFrame), fabricCanvas.width, fabricCanvas.height).generate_frame()\n      for(var i = 0; i < bbox.length; i++){\n        var curr_obj = bbox[i]\n        console.log(curr_obj)\n        fabricCanvas.add(curr_obj);\n        fabricCanvas.setActiveObject(curr_obj);\n        fabricCanvas.fire('saveData');\n      }\n    }\n\n  }\n\n  const [numBoundingBox, setNumBoundingBox] = useState(0)\n  const handleNumBoundingBox = val => {\n    setNumBoundingBox(numBoundingBox + 1);\n    \n  }\n\n\n  const skip_frame_forward = e =>{\n    var total_frames = duration * frame_rate\n    frame_data[currentFrame] = fabricCanvas.toJSON()\n    console.log(currentFrame)\n    console.log(frame_data)\n    player.seekTo((((player.getCurrentTime()/duration)*total_frames)+1)/(total_frames))\n  }\n\n  const skip_frame_backward = e => {\n    var total_frames = duration * frame_rate\n    player.seekTo((((player.getCurrentTime()/duration)*total_frames)-1)/(total_frames))\n  }\n\n  frame_data[currentFrame] = fabricCanvas.toJSON()\n\n  const downloadFile = async () => {\n    const fileName = \"generated_annotations\";\n    //const json = JSON.stringify(fabricCanvas.getObjects());\n    const json = JSON.stringify(frame_data);\n    const blob = new Blob([json],{type:'application/json'});\n    const href = await URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = href;\n    link.download = fileName + \".json\";\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  }\n\n  const [show, setShow] = useState(false);\n\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n\n  return (\n    <div>\n      <Navbar bg=\"dark\" variant=\"dark\" className=\"bg-5\">\n          <Navbar.Brand href=\"#home\">Annotation Tool</Navbar.Brand>\n          <Nav className=\"mr-auto\">\n              <Nav.Link onClick={handleShow}>Instructions</Nav.Link>\n\n              <NavDropdown title=\"Annotation Type\" id=\"basic-nav-dropdown\">\n                <NavDropdown.Item >Square Box</NavDropdown.Item>\n                <NavDropdown.Divider />\n                <NavDropdown.Item >Key Point</NavDropdown.Item>\n                <NavDropdown.Divider />\n                <NavDropdown.Item >Wire Frame</NavDropdown.Item>\n              </NavDropdown>\n\n              <NavDropdown title=\"Export\" id=\"basic-nav-dropdown\">\n                <NavDropdown.Item onClick={downloadFile}>JSON</NavDropdown.Item>\n                <NavDropdown.Divider />\n                <NavDropdown.Item >CSV</NavDropdown.Item>\n              </NavDropdown>\n\n              <NavDropdown title=\"Settings\" id=\"basic-nav-dropdown\">\n                <NavDropdown.Divider />\n                <NavDropdown.Item disabled={true}>Input Frame-Rate: <input type=\"text\"></input></NavDropdown.Item>\n              </NavDropdown>\n          </Nav>\n          <div>\n            <Button variant=\"secondary\" disabled=\"true\">Frame # {parseInt(currentFrame)+' / '+parseInt(duration * frame_rate)}</Button>\n            <Form style={{float: \"left\", width: 80}}>\n              <Form.File id=\"file\" label=\"Annotation Upload\" custom type=\"file\" onChange={handleOldAnnotation}/>\n            </Form>\n            <Form style={{float: \"left\", width: 80}}>\n              <Form.File id=\"file\" label=\"Video Upload\" custom type=\"file\" onChange={handleVideoUpload} />\n            </Form>\n            <Button variant=\"primary\" onClick={skip_frame_backward}>Prev</Button>{' '}\n            <Button variant=\"primary\" onClick={handlePlaying}>{play_button_text}</Button>{' '}\n            <Button variant=\"primary\" onClick={skip_frame_forward}>Next</Button>{' '}\n            <NewObjects />\n          </div>\n      </Navbar>\n      <Modal show={show} onHide={handleClose}>\n          <Modal.Header closeButton>\n          <Modal.Title>Instructions</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>TODO: Add instructions</Modal.Body>\n          <Modal.Footer>\n          <Button variant=\"secondary\" onClick={handleClose}>Close</Button>\n          </Modal.Footer>\n      </Modal>\n      <div style={{display: \"flex\"}}>\n        <div style={{position: \"relative\", width: window.innerWidth * scaling_factor, height: window.innerHeight * scaling_factor}}>\n          <ReactPlayer \n            onProgress={handleSetCurrentFrame} \n            ref={handleSetPlayer} \n            onDuration={handleSetDuration} \n            url={videoFilePath} \n            width='100%'\n            height='99.999%'\n            playing={playing} \n            controls={false} \n            style={{position:'realtive', float:'left'}}\n            volume={0}\n            muted={true}\n            pip={false}\n          />\n          <Fabric/>\n          <input\n            style={{width: window.innerWidth * scaling_factor}}\n            type='range' min={0} max={0.999999} step='any'\n            value={sliderPercent}\n            onMouseDown={handleSeekMouseDown}\n            onChange={handleSeekChange}\n            onMouseUp={handleSeekMouseUp}\n          />\n        </div>\n        <ChangeTable data={frame_data[currentFrame]} style={{ float: \"right\"}}/>\n      </div>\n    </div>\n  );\n}\n      //<ActiveObject />\n      //<input type=\"file\" onChange={handleVideoUpload1} />\n      //<div>\n        //<ReactPlayer url={videoFilePath1} width=\"50%\" height=\"50%\" controls={true} style={{position:'relative', float:'left'}}/>\n        //<Fabric/>\n      //</div>\n\nexport default MainUpload;","import React, { useState } from \"react\"; \nimport ReactDOM from 'react-dom'\nimport ReactPlayer from 'react-player'\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nimport Button from 'react-bootstrap/Button'\nimport Navbar from 'react-bootstrap/Navbar'\nimport Nav from 'react-bootstrap/Nav'\nimport Modal from 'react-bootstrap/Modal'\nimport Form from 'react-bootstrap/Form'\nimport Table from 'react-bootstrap/Table'\n\n//import Custon_Nav_Bar from '../backend_processing/nav_bar'\n\nimport Annotation from '../../backend_processing/annotation'\nimport ChangeTable from '../Components/change_table'\nimport { NavDropdown } from \"react-bootstrap\";\n\nconst fabric = require(\"fabric\").fabric;\nconst Nuclear = require(\"nuclear-js\");\nconst createReactClass = require('create-react-class');\n\n\n//TODO ADD DYNAMIC SOLUTION \nvar frame_rate = 15;\nvar scaling_factor = .8\n\nvar keyMirror = function(obj) {\n  var ret = {};\n  var key;\n  if (!(obj instanceof Object && !Array.isArray(obj))) {\n    throw new Error('keyMirror(...): Argument must be an object.');\n  }\n  for (key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      ret[key] = key;\n    }\n  }\n  return ret;\n};\n\nvar reactor = new Nuclear.Reactor({ debug: true });\nvar keys = keyMirror({ fabricData: null, activeObject: null });\n\n// globally accessable fabricCanvas instance\nvar fabricCanvas = new fabric.Canvas();\n\n// A place to put fabric data\nvar fabricStore = Nuclear.Store({\n  getInitialState() {\n    return Nuclear.toImmutable({\n    \tfabricData: {\n      \tobjects: [],\n      },\n      activeObject: false,\n    })\n  },\n  initialize() {\n    this.on(keys.fabricData, this.saveFabricData)\n    this.on(keys.activeObject, this.saveActiveObject)\n  },\n  saveFabricData(state, fabricData) {\n\t\treturn state.set('fabricData', Nuclear.toImmutable(fabricData));\n\t},\n  saveActiveObject(state, value) {\n\t\treturn state.set('activeObject',value);\n\t}\n});\n\nreactor.registerStores({\n  'fabricStore': fabricStore,\n});\n\nvar Fabric = createReactClass({\n\tcomponentDidMount() {\n  \tvar el = ReactDOM.findDOMNode(this);\n    \n    // Here we have the canvas so we can initialize fabric\n    fabricCanvas.initialize(el, {\n    \theight: window.innerHeight* scaling_factor,\n      width: window.innerWidth * scaling_factor,\n      backgroundColor : null,\n    });\n    \n    // on mouse up lets save some state\n    fabricCanvas.on('mouse:up', () => {\n      reactor.dispatch(keys.fabricData, fabricCanvas.toObject());\n      reactor.dispatch(keys.activeObject, !!fabricCanvas.getActiveObject());\n    });\n    \n    // an event we will fire when we want to save state\n    fabricCanvas.on('saveData', () => {\n    \treactor.dispatch(keys.fabricData, fabricCanvas.toObject());\n      reactor.dispatch(keys.activeObject, !!fabricCanvas.getActiveObject());\n      fabricCanvas.renderAll(); // programatic changes we make will not trigger a render in fabric\n    });\n  }, \n  render() {\n    return <canvas></canvas>\n  }\n});\n\n\n\nvar NewObjects = createReactClass({\n\tmixins: [reactor.ReactMixin],\n  getDataBindings() {\n  \treturn {\n    \tfabricData: ['fabricStore', 'fabricData'],\n    \tactiveObject: ['fabricStore', 'activeObject'],\n    };\n  },\n  render: function() {\n  \tif (this.state.fabricData.get('objects').size === 0) {\n    \t// no object is on the canvas so show interface to add one\n      //<input type=\"file\" id=\"video_submit\" value=\"none\"/> //onClick={this.addKanalImg}/>\n      return (\n      <div style={{float: \"right\"}}>\n        <Button onClick={this.addSquare} style={{position:\"relative\"}}>Add Square</Button>{' '}\n        <Button onClick={this.remove} style={{position:\"relative\"}}>Remove</Button>{' '}\n      </div>\n      );\n    } else {\n    \t// an object is selected so lets interact with it\n    \treturn (\n        <div style={{float: \"right\"}}>\n          <Button onClick={this.addSquare} style={{position:\"relative\"}}>Add Square</Button>{' '}\n          <Button onClick={this.remove} style={{position:\"relative\"}}>Remove</Button>{' '}\n        </div>\n      );\n    }//else {\n    \t// if there is an object but it is not selected then remove the buttons\n    \t//return null;\n    //}\n  },\n  addSquare() {\n    var color = \"#\" + ((1<<24)*Math.random() | 0).toString(16)\n    var bounding_box = new fabric.Rect({\n      hasRotatingPoint: false,\n      uniScaleTransform: true,\n    \theight: 50,\n    \twidth: 50,\n      originX: 'center',\n      originY: 'center',\n      fill: color,\n      borderColor: '#000',\n      opacity: '.4',\n      top: fabricCanvas.height / 2,\n      left: fabricCanvas.width / 2,\n    }, function(drop){\n        console.log(drop)\n    })\n  \tfabricCanvas.add(bounding_box);\n    fabricCanvas.setActiveObject(bounding_box);\n    fabricCanvas.fire('saveData');\n  },\n  remove() {\n    fabricCanvas.remove(fabricCanvas.getActiveObject());\n    fabricCanvas.fire('saveData');\n  }\n});\n\nvar ActiveObject = createReactClass({\n\tmixins: [reactor.ReactMixin],\n  getDataBindings() {\n  \treturn {\n    \tfabricObject: ['fabricStore', 'fabricData', 'objects', 0],\n      activeObject: ['fabricStore', 'activeObject']\n    };\n  },\n  render: function() {\n    //return null;\n    console.log(this.state.activeObject)\n  \tif (this.state.fabricObject) {\n    \t// if an object exists in state we can acess the data from any where in the app\n    \tvar fill = this.state.fabricObject.get('fill');\n      console.log((fabricCanvas.getActiveObject()))\n      return (<div>\n        <div><b>Active Object</b></div>\n        <div>fill: <span style={{ color: fill}}>{this.state.fabricObject.get('fill')}</span></div>\n        <div>top: {this.state.fabricObject.get('top')}</div>\n        <div>left: {this.state.fabricObject.get('left')}</div>\n        <div>angle: {this.state.fabricObject.get('angle')}</div>\n        <div>scaleX: {this.state.fabricObject.get('scaleX')}</div>\n        <div>scaleY: {this.state.fabricObject.get('scaleY')}</div>\n      </div>);\n    } else {\n      console.log(fabricCanvas.getActiveObject())\n    \treturn null;\n    }\n  },\n});\n\nfunction draw_annotation(x, y, width, height){\n\n}\n\nfunction parse_file(file){\n  \n}\n\nvar frame_data = [];\nvar upload = false;\n\n//Current frame counter\nfunction MainYoutube() {\n  const [videoFilePath, setVideoFileURL] = useState(null);\n  const handleVideoUpload = (event) => {\n    //console.log(oldAnnotation)\n    setVideoFileURL(URL.createObjectURL(event.target.files[0]));\n    upload = true;\n  };\n\n  //Code for dual video upload option. Currently disabled\n  const [videoFilePath1, setVideoFileURL1] = useState(null);\n  const handleVideoUpload1 = (event) => {\n    setVideoFileURL1(URL.createObjectURL(event.target.files[0]));\n  };\n  \n  //ASYNC Function  - To note that the data that comes out of this will be a bit delayed and this could cause some issues.\n  const [oldAnnotation, setOldAnnotation] = useState(null)\n  const handleOldAnnotation = (event) => {\n    return new Promise((resolve, reject) => {\n      var reader = new FileReader();\n      reader.onload = function(e) {\n         resolve(setOldAnnotation(JSON.parse(e.target.result)));\n      }\n      reader.readAsText(event.target.files[0])\n    })\n  }\n    \n  \n\n  const [playing, setPlaying] = useState(false);\n  const handlePlaying = (event) => {\n    setPlaying(!playing)\n  }\n\n  var play_button_text = \"ERROR\"\n  if(playing === true){\n    play_button_text = \"Pause\"\n  }else{\n    play_button_text = \"Play\"\n  }\n\n  const [seeking, setSeeking] = useState(false)\n  const [sliderPercent, setSliderPercent] = useState(0)\n\n  const handleSeekChange = e => {\n    setSliderPercent(parseFloat(e.target.value))\n  }\n\n  const handleSeekMouseDown = e => {\n    setSeeking(true)\n  }\n\n  const handleSeekMouseUp = e => {\n    setSeeking(false)\n    player.seekTo(parseFloat(e.target.value))\n  }\n\n  const [player, setPlayer] = useState(null)\n  const handleSetPlayer = val => {\n    setPlayer(val)\n    if(upload === true && player != null){      \n      console.log(\"RESET VALUES\")\n      frame_data = new Array(7200)\n      upload = false;\n    }\n  }\n\n  const [duration, setDuration] = useState(0);\n  const handleSetDuration = val => {\n    setDuration(parseInt(val))\n    console.log(val)\n  }\n\n  var tot = 0\n\n  const [currentFrame, setCurrentFrame] = useState(0)\n  const handleSetCurrentFrame = val => {\n    console.log(val)\n    var total_frames = duration * frame_rate\n    tot = total_frames\n    setSliderPercent(currentFrame/total_frames)\n    setCurrentFrame(Math.round(val['played']*total_frames))\n  }\n\n\n  const skip_frame_forward = e =>{\n    var total_frames = duration * frame_rate\n    frame_data[currentFrame] = fabricCanvas.toJSON()\n    console.log(currentFrame)\n    console.log(frame_data)\n    player.seekTo((((player.getCurrentTime()/duration)*total_frames)+1)/(total_frames))\n  }\n\n  const skip_frame_backward = e => {\n    var total_frames = duration * frame_rate\n    player.seekTo((((player.getCurrentTime()/duration)*total_frames)-1)/(total_frames))\n  }\n\n  \n\n  const downloadFile = async () => {\n    const fileName = \"generated_annotations\";\n    //const json = JSON.stringify(fabricCanvas.getObjects());\n    const json = JSON.stringify(frame_data);\n    const blob = new Blob([json],{type:'application/json'});\n    const href = await URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = href;\n    link.download = fileName + \".json\";\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  }\n\n  const [show, setShow] = useState(false);\n\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n\n  return (\n    <div>\n      <Navbar bg=\"dark\" variant=\"dark\" class=\"bg-5\">\n          <Navbar.Brand href=\"#home\">Annotation Tool</Navbar.Brand>\n          <Nav className=\"mr-auto\">\n              <Nav.Link onClick={handleShow}>Instructions</Nav.Link>\n\n              <NavDropdown title=\"Annotation Type\" id=\"basic-nav-dropdown\">\n                <NavDropdown.Item >Square Box</NavDropdown.Item>\n                <NavDropdown.Divider />\n                <NavDropdown.Item >Key Point</NavDropdown.Item>\n                <NavDropdown.Divider />\n                <NavDropdown.Item >Wire Frame</NavDropdown.Item>\n              </NavDropdown>\n\n              <NavDropdown title=\"Export\" id=\"basic-nav-dropdown\">\n                <NavDropdown.Item onClick={downloadFile}>JSON</NavDropdown.Item>\n                <NavDropdown.Divider />\n                <NavDropdown.Item >CSV</NavDropdown.Item>\n              </NavDropdown>\n\n              <NavDropdown title=\"Settings\" id=\"basic-nav-dropdown\">\n                <NavDropdown.Divider />\n                <NavDropdown.Item disabled={true}>Input Frame-Rate: <input type=\"text\"></input></NavDropdown.Item>\n              </NavDropdown>\n          </Nav>\n          <div>\n            <Button variant=\"secondary\" disabled=\"true\">Frame # {parseInt(currentFrame)+' / '+parseInt(duration * frame_rate)}</Button>\n            <Form style={{float: \"left\", width: 80}}>\n              <Form.File id=\"file\" label=\"Annotation Upload\" custom type=\"file\" onChange={handleOldAnnotation}/>\n            </Form>\n            <Form style={{float: \"left\", width: 80}}>\n              <Form.File id=\"file\" label=\"Video Upload\" custom type=\"file\" onChange={handleVideoUpload} />\n            </Form>\n            <Button variant=\"primary\" onClick={skip_frame_backward}>Prev Frame</Button>{' '}\n            <Button variant=\"primary\" onClick={handlePlaying}>{play_button_text}</Button>{' '}\n            <Button variant=\"primary\" onClick={skip_frame_forward}>Next Frame</Button>{' '}\n            <NewObjects />\n          </div>\n      </Navbar>\n      <Modal show={show} onHide={handleClose}>\n          <Modal.Header closeButton>\n          <Modal.Title>Instructions</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>TODO: Add instructions</Modal.Body>\n          <Modal.Footer>\n          <Button variant=\"secondary\" onClick={handleClose}>Close</Button>\n          </Modal.Footer>\n      </Modal>\n      <div style={{display: \"flex\"}}>\n        <div style={{position: \"relative\"}}>\n          <ReactPlayer \n            onProgress={handleSetCurrentFrame} \n            ref={handleSetPlayer} \n            onDuration={handleSetDuration} \n            url={\"https://www.youtube.com/watch?v=MF6J2H983HY\"} \n            width={window.innerWidth * scaling_factor} height={window.innerHeight * scaling_factor}\n            playing={playing} \n            controls={false} \n            style={{position:'realtive', float:'left'}}\n            volume={0}\n            muted={true}\n            pip={false}\n          />\n          <Fabric/>\n          <input\n            style={{width: window.innerWidth * scaling_factor}}\n            type='range' min={0} max={0.999999} step='any'\n            value={sliderPercent}\n            onMouseDown={handleSeekMouseDown}\n            onChange={handleSeekChange}\n            onMouseUp={handleSeekMouseUp}\n          />\n        </div>\n        <ChangeTable data={frame_data[currentFrame]} style={{ float: \"right\"}}/>\n      </div>\n    </div>\n  );\n}\n      //<ActiveObject />\n      //<input type=\"file\" onChange={handleVideoUpload1} />\n      //<div>\n        //<ReactPlayer url={videoFilePath1} width=\"50%\" height=\"50%\" controls={true} style={{position:'relative', float:'left'}}/>\n        //<Fabric/>\n      //</div>\n\nexport default MainYoutube;","import React, { useState } from \"react\"; \nimport ReactDOM from 'react-dom'\nimport ReactPlayer from 'react-player'\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nimport Button from 'react-bootstrap/Button'\nimport Navbar from 'react-bootstrap/Navbar'\nimport Nav from 'react-bootstrap/Nav'\nimport Modal from 'react-bootstrap/Modal'\nimport Form from 'react-bootstrap/Form'\nimport Table from 'react-bootstrap/Table'\n\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link,\n    useRouteMatch,\n    useParams\n  } from \"react-router-dom\";\n\nimport MainUpload from './main_upload'\nimport MainYoutube from './main_youtube'\nimport { Container, Jumbotron } from \"react-bootstrap\";\nimport App from \"../../App\";\n\n//<img src={process.env.PUBLIC_URL + '/favicon.ico'} alt=\"logo\" style={{width: \"30%\"}} />\nfunction SelectionScreen(){\n    const [] = useState(false)\n\n    const [youtube, setYoutube] = useState(false)\n    const handleYouTube = (event) => {\n        setYoutube(!youtube)\n    } \n\n    const [upload, setUpload] = useState(false)\n    const handleUpload = (event) => {\n        setUpload(!upload)\n    }\n\n    if(youtube){\n        return (<MainYoutube/>)\n    }else if(upload){\n        return (<MainUpload/>)\n    }else{\n        return (\n            <Router>\n                <div>\n                <Jumbotron fluid>\n                    <Container>\n                        <div class=\"row align-items-center\">\n                            <div class=\"pb-4 col-md-6 col-lg-7\">\n                                <h0 style={{fontSize: \"50px\"}}>\n                                    Annotation Tool {\"  \"}\n                                    <img class=\"\" src={process.env.PUBLIC_URL + '/favicon.ico'} alt=\"logo\" style={{width: \"9%\"}}/>\n                                </h0>\n                                <h5 > Online tool to mass annotate videos for AI/ML </h5>\n                                <Button size=\"lg\">Instructions</Button>\n                            </div> \n\n                            <div class=\"col-md-6 col-lg-5\">\n                                <div class=\"row\">\n                                    <div class=\"col\">\n                                        <div class=\"card my-2\">\n                                            <Link to=\"/upload\" variant=\"btn-primary outline-success\">Video Upload</Link>\n                                        </div> \n                                    </div>\n                                    <div class=\"col-12\">\n                                        <div class=\"card my-2\">\n                                            <Link to=\"/youtube\" variant=\"btn-primary outline-success\">Youtube</Link>\n                                        </div> \n                                    </div>\n                                </div>\n                            </div> \n                        </div> \n                    </Container>\n\n\n                    <div class=\"container\">\n                        <div class=\"row align-items-center\">\n                            \n                        </div>\n                    </div>\n                </Jumbotron>\n\n\n                <Switch>\n                    <Route path='/youtube' component={MainYoutube}/>\n                    <Route path='/upload' component={MainUpload}/>\n                </Switch>\n                </div>\n            </Router>\n        )\n    }\n}\n\nexport default SelectionScreen;","import React, { useState } from \"react\"; \nimport ReactDOM from 'react-dom'\nimport './App.css';\nimport ReactPlayer from 'react-player'\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n  useRouteMatch,\n  useParams\n} from \"react-router-dom\";\n\nimport FrontEnd from './ui_elements/Pages/main_upload'\nimport SelectionScreen from './ui_elements/Pages/selection_screen'\n\nimport MainUpload from './ui_elements/Pages/main_upload'\nimport MainYoutube from './ui_elements/Pages/main_youtube'\n\n//<FrontEnd></FrontEnd>\nfunction App() {\n  return (\n      <Router>\n        <div>\n          <Switch>\n              <Route exact path='/' component={SelectionScreen}/>\n              <Route path='/youtube' component={MainYoutube}/>\n              <Route path='/upload' component={MainUpload}/>\n          </Switch>\n        </div>\n    </Router>\n  );\n}\n      //<ActiveObject />\n      //<input type=\"file\" onChange={handleVideoUpload1} />\n      //<div>\n        //<ReactPlayer url={videoFilePath1} width=\"50%\" height=\"50%\" controls={true} style={{position:'relative', float:'left'}}/>\n        //<Fabric/>\n      //</div>\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}